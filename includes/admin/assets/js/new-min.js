let activeEl_efb=0,amount_el_efb=1,step_el_efb=0,steps_index_efb=[],valj_efb=[],maps_efb=[],state_efb="view",mousePostion_efb={x:0,y:0},draw_mouse_efb=!1,c2d_contex_efb,lastMousePostion_efb=mousePostion_efb,canvas_id_efb="",fileEfb,formName_Efb,current_s_efb=1,devlop_efb=!1,preview_efb=!1,lan_name_emsFormBuilder="en",stock_state_efb=!1,page_state_efb="",setting_emsFormBuilder=[],position_l_efb="start",temp_efb,pub_el_text_color_efb="text-labelEfb",pub_message_text_color_efb="text-muted",pub_icon_color_efb="text-pinkEfb",pub_label_text_color_efb="text-labelEfb",pub_el_border_color_efb="border-d",pub_bg_button_color_efb="btn-primary",pub_txt_button_color_efb="text-white";const getUrlparams_efb=new URLSearchParams(location.search),mobile_view_efb=document.getElementsByTagName("body")[0].classList.contains("mobile")?1:0;function fub_shwBtns_efb(){for(const el of document.querySelectorAll(".showBtns"))el.addEventListener("click",e=>{active_element_efb(el)})}function pro_show_efb(state){let message=state;state=`<div class="efb  pro-version-efb-modal"><i class="efb  bi-gem"></i></div>
  <h5 class="efb  txt-center">${message="string"!=typeof state?1==state?efb_var.text.proUnlockMsg:efb_var.text.ifYouNeedCreateMoreThan2Steps:message}</h5>
  <div class="efb row">
  <div class="efb  col-md-6  text-center">
  <button class="efb btn mt-3 efb btn-r h-d-efb btn-outline-pink "  onClick ="open_whiteStudio_efb('pro')">${efb_var.text.priceyr.replace("NN","19.5")} </button>
  </div>
    <div class="efb  text-center col-md-6"><button type="button" class="efb btn btn-r efb btn-primary efb-btn-lg mt-3 mb-3" onClick ="open_whiteStudio_efb('pro')">
      <i class="efb  bi-gem mx-1 pro"></i>
        ${efb_var.text.activateProVersion}
      </button></div>
    
  </div>`;show_modal_efb(state,efb_var.text.proVersion,"","proBpx"),state_modal_show_efb(1)}function move_show_efb(){var body=`<div class="efb  pro-version-efb-modal"><i class="efb "></i></div>
  <div class="efb  text-center" dir="rtl">
   <img src="${efb_var.images.movebtn}" class="efb  img-fluid" alt="">
  </div>`;show_modal_efb(body,"","bi-arrows-move","saveBox"),state_modal_show_efb(1)}(efb_var_waitng=time=>{setTimeout(()=>{"object"==typeof efb_var?(formName_Efb=efb_var.text.form,default_val_efb=efb_var.text.selectOption,pro_efb="1"==efb_var.pro||1==efb_var.pro,position_l_efb=1==efb_var.rtl?"end":"start",lan_name_emsFormBuilder=efb_var.language.slice(0,2),efb_var.hasOwnProperty("addons")&&"object"==typeof efb_var.addons&&(addons_emsFormBuilder=efb_var.addons)):3e4!=(time+=50)?efb_var_waitng(time):alert_message_efb(efb_var.text.error,"Please Hard Refresh",60)},time)})(50);const show_modal_efb=(body,title,icon,type)=>{document.getElementById("settingModalEfb-title").innerHTML=title,document.getElementById("settingModalEfb-icon").className=icon+" mx-2",document.getElementById("settingModalEfb-body").innerHTML=body,"settingBox"==type?(document.getElementById("settingModalEfb_").classList.remove("save-efb"),document.getElementById("settingModalEfb").classList.contains("modal-new-efb")||document.getElementById("settingModalEfb").classList.add("modal-new-efb")):"deleteBox"==type?(document.getElementById("settingModalEfb_").classList.remove("save-efb"),document.getElementById("modalConfirmBtnEfb")||(document.getElementById("settingModalEfb-sections").innerHTML+=`
    <div class="efb  modal-footer" id="modal-footer-efb">
      <a type="button" class="efb  btn btn-danger" data-bs-dismiss="modal"  id="modalConfirmBtnEfb">
          ${efb_var.text.yes}
      </a> 
    </div>`)):"saveBox"==type?(document.getElementById("settingModalEfb").classList.remove("modal-new-efb"),document.getElementById("settingModalEfb_").classList.contains("save-efb")||document.getElementById("settingModalEfb_").classList.add("save-efb")):"saveLoadingBox"==type?(document.getElementById("settingModalEfb").classList.remove("modal-new-efb"),document.getElementById("settingModalEfb_").classList.contains("save-efb")||document.getElementById("settingModalEfb_").classList.add("save-efb"),document.getElementById("settingModalEfb-body").innerHTML=loading_messge_efb()):"chart"==type?(document.getElementById("settingModalEfb").classList.remove("modal-new-efb"),document.getElementById("settingModalEfb_").classList.contains("save-efb")||document.getElementById("settingModalEfb_").classList.add("save-efb")):(document.getElementById("settingModalEfb_").classList.remove("save-efb"),document.getElementById("settingModalEfb").classList.remove("modal-new-efb"))},add_new_option_view_select=(idin,value,id_ob,tag,parentsID)=>{var indxP=valj_efb.findIndex(x=>x.id_==parentsID);let op="\x3c!-- option --!> 2",price="\x3c!--efb.app--\x3e",qst="\x3c!--efb.app--\x3e",tagtype=tag;var currency=valj_efb[0].hasOwnProperty("currency")?valj_efb[0].currency:"USD";return 0!=tag.includes("pay")&&(tagtype=tag.slice(3),price=`<span  class="efb col fw-bold  text-labelEfb h-d-efb hStyleOpEfb d-flex justify-content-end"><span id="${idin}-price" class="efb efb-crrncy">${Number(0).toLocaleString(lan_name_emsFormBuilder,{style:"currency",currency:currency})}</span></span>`),0!=tag.includes("chl")&&(tagtype=tag.slice(3),qst=`<input type="text" class="efb ${valj_efb[indxP].el_text_color}  ${valj_efb[indxP].el_height} checklist col-2 hStyleOpEfb emsFormBuilder_v border-d" data-id="${idin}" data-vid="" id="${idin}_chl" placeholder="${valj_efb[indxP].pholder_chl_value}"  disabled>`),op=fun_el_select_in_efb(tag)?`<option value="${value}" id="${idin}" data-id="${idin}-id"  data-op="${idin}" class="efb ${valj_efb[indxP].el_text_color} ${valj_efb[indxP].label_text_size} ${valj_efb[indxP].el_height}">${value}</option>`:`<div class="efb  form-check ${valj_efb[indxP].hasOwnProperty("op_style")&&1!=Number(valj_efb[indxP].op_style)?"col-md-"+12/Number(valj_efb[indxP].op_style):""}" data-parent="${parentsID}"  id="${id_ob}-v">
    <input class="efb  form-check-input ${valj_efb[indxP].el_text_size}" type="${tagtype}" name="${parentsID}"  value="${value}" id="${idin}" data-id="${idin}-id" data-op="${idin}" disabled>
    <label class="efb ${valj_efb[indxP].hasOwnProperty("pholder_chl_value")?"col-8":""}  ${valj_efb[indxP].el_text_color} ${valj_efb[indxP].label_text_size} ${valj_efb[indxP].el_height} hStyleOpEfb " id="${idin}_lab" for="${idin}">${value}</label>
    ${qst}
    ${price}
    </div>`};function addNewElement(elementId,rndm,editState,previewSate){let pos=["","","",""];var shwBtn=1!=previewSate?"showBtns":"";let indexVJ=0!=editState?valj_efb.findIndex(x=>x.id_==rndm):0,optn=(1==previewSate&&"html"!=elementId&&"register"!=elementId&&"login"!=elementId&&"subscribe"!=elementId&&"survey"!=elementId&&(pos=get_position_col_el(valj_efb[indexVJ].dataId,!1)),amount_el_efb=0==editState?Number(amount_el_efb)+1:valj_efb[indexVJ].amount,element_name=0==editState?elementId:valj_efb[indexVJ].name,"\x3c!-- options --\x3e"),pay=(1<=step_el_efb&&0==editState&&"steps"==elementId&&(step_el_efb=Number(step_el_efb)+1),0!=editState&&1!=previewSate&&(step_el_efb=valj_efb[0].steps,t=1==valj_efb[0].steps?0:1,add_buttons_zone_efb(t,"dropZoneEFB")),1==previewSate?"payefb":"pay");if(newElement="",0==previewSate&&Object.entries(valj_efb[indexVJ]).forEach(([key,val])=>{fun_addStyle_costumize_efb(val.toString(),key,indexVJ)}),1==step_el_efb){let state=0==editState?!0:!1;if("steps"!=elementId){0==editState&&valj_efb.length<2&&(valj_efb.push({id_:""+step_el_efb,type:"step",dataId:""+step_el_efb,classes:"",id:""+step_el_efb,name:efb_var.text[formName_Efb].toUpperCase(),icon:"",step:step_el_efb,amount:amount_el_efb,EfbVersion:2,message:"",label_text_size:"fs-5",el_text_size:"fs-5",label_text_color:"text-darkb",el_text_color:"text-labelEfb",message_text_color:pub_message_text_color_efb,icon_color:pub_icon_color_efb,icon:"bi-ui-checks-grid",visible:1}),sort=(indexVJ=valj_efb.length-1)<=1?"unsortable":"sortable",newElement=` 
        <section class="efb  ${sort} list   row my-2  efbField stepNavEfb stepNo" data-step="${step_el_efb}" data-amount="${step_el_efb}" data-id="${step_el_efb}" id="${step_el_efb}" data-tag="steps">
            <div class="efb  row my-2  ${shwBtn} efbField stepNavEfb" data-step="${step_el_efb}" data-amount="${step_el_efb}" data-id="${step_el_efb}" id="${step_el_efb}" data-tag="steps">
            <h2 class="efb  col-10 mx-2 my-0"><i class="efb  ${valj_efb[indexVJ].icon} ${"default"!=valj_efb[indexVJ].label_text_size?valj_efb[indexVJ].label_text_size:"fs-5"}  ${valj_efb[indexVJ].icon_color}"
                    id="${step_el_efb}_icon"></i> <span id="${step_el_efb}_lab" class="efb   text-darkb  ${"default"!=valj_efb[indexVJ].label_text_size?valj_efb[indexVJ].label_text_size:"fs-5"} ">${valj_efb[indexVJ].name}</span></span></h2>
            <small id="${step_el_efb}-des" class="efb  form-text ${valj_efb[indexVJ].message_text_color} border-bottom px-4   ">${valj_efb[indexVJ].message}</small>
            <div class="efb  col-sm-10">
                <div class="efb  btn-edit-holder btnSetting d-none " id="btnSetting-${step_el_efb}">
                    <button type="button" class="efb  btn  btn-edit  btn-sm BtnSideEfb" id="settingElEFb"
                        data-id="id1" data-bs-toggle="tooltip" title="${efb_var.text.edit}"
                        onclick="show_setting_window_efb('${step_el_efb}')">
                        <div class="icon-container efb"><i class="efb   bi-gear-wide-connected text-success" id="efbSetting"></i></div>
                    </button>
                </div>
            </div>
        </div>
        </section>`);const t=1==valj_efb[0].steps?0:1;1!=previewSate&&(0==editState?add_buttons_zone_efb(0,"dropZoneEFB"):add_buttons_zone_efb(t,"dropZoneEFB"))}else"steps"==elementId&&1==step_el_efb&&0==state&&0==editState&&(valj_efb.push({id_:""+step_el_efb,type:"step",dataId:""+step_el_efb,classes:"",id:""+step_el_efb,name:efb_var.text[formName_Efb].toUpperCase(),icon:"",step:step_el_efb,amount:amount_el_efb,EfbVersion:2,message:"",label_text_size:"fs-5",el_text_size:"fs-5",file:"document",label_text_color:"text-darkb",el_text_color:"text-dark",message_text_color:pub_message_text_color_efb,icon_color:pub_icon_color_efb,icon:"bi-ui-checks-grid",visible:1}),0==editState)&&2<valj_efb.length&&(step_el_efb=Number(step_el_efb)+1);amount_el_efb=Number(amount_el_efb)+1}0==editState&&("steps"!=elementId&&0<=step_el_efb||"steps"==elementId&&0<=step_el_efb)&&(0==pro_efb&&step_el_efb<3||1==pro_efb)&&sampleElpush_efb(rndm,elementId);var iVJ=0==editState?valj_efb.length-1:valj_efb.findIndex(x=>x.id_==rndm);let dataTag="text";var desc=`<small id="${rndm}-des" class="efb  form-text d-flex  fs-7 col-sm-12 efb ${1==previewSate&&"col-md-4"==pos[1]||"justify-content-start"!=valj_efb[iVJ].message_align?"":"mx-4"}  ${valj_efb[iVJ].message_align}  ${valj_efb[iVJ].message_text_color} ${valj_efb[iVJ].hasOwnProperty("message_text_size")?valj_efb[iVJ].message_text_size:""} ">${valj_efb[iVJ].message} </small> `,label=`<label for="${rndm}_" class="efb mx-0 px-0 pt-2 pb-1  ${1==previewSate?pos[2]:"col-md-12"} col-sm-12 col-form-label ${valj_efb[iVJ].hasOwnProperty("hflabel")&&1==Number(valj_efb[iVJ].hflabel)?"d-none":""} ${valj_efb[iVJ].label_text_color} ${valj_efb[iVJ].label_align} ${"default"!=valj_efb[iVJ].label_text_size?valj_efb[iVJ].label_text_size:""} " id="${rndm}_labG""><span id="${rndm}_lab" class="efb  ${valj_efb[iVJ].label_text_size}">${valj_efb[iVJ].name}</span><span class="efb  mx-1 text-danger" id="${rndm}_req">${1==valj_efb[iVJ].required||1==valj_efb[iVJ].required?"*":""}</span></label>`,ttip=`<small id="${rndm}_-message" class="efb text-danger py-1 fs-7 tx ttiptext px-2"> ! </small>`,rndm_1=Math.random().toString(36).substr(2,9),rndm_2=Math.random().toString(36).substr(2,9),op_3=Math.random().toString(36).substr(2,9),op_4=Math.random().toString(36).substr(2,9),op_5=Math.random().toString(36).substr(2,9);let ui="";var vtype="payCheckbox"==elementId||"payRadio"==elementId||"paySelect"==elementId||"payMultiselect"==elementId||"chlRadio"==elementId||"chlCheckBox"==elementId||"imgRadio"==elementId?elementId.slice(3).toLowerCase():elementId;let classes="";var corner=valj_efb[iVJ].hasOwnProperty("corner")?valj_efb[iVJ].corner:"efb-square";let minlen,maxlen,temp,col;var t=1==previewSate&&valj_efb[iVJ].hasOwnProperty("hidden")&&1==valj_efb[iVJ].hidden?"d-none":"",disabled=valj_efb[iVJ].hasOwnProperty("disabled")&&1==valj_efb[iVJ].disabled?"disabled":"";let ps="col-md-12";switch(""!=pos[3]||"firstName"!=elementId&&"lastName"!=elementId&&"country"!=elementId&&"statePro"!=elementId&&"city"!=elementId&&"zipcode"!=elementId||(ps="col-md-6"),pos[3]=""==pos[3]?"col-md-12":pos[3],elementId){case"email":case"text":case"password":case"tel":case"url":case"date":case"color":case"number":case"firstName":case"lastName":case"datetime-local":case"zipcode":case"address_line":var type="firstName"==elementId||"lastName"==elementId||"zipcode"==elementId||"address_line"==elementId?"text":elementId;maxlen=valj_efb[iVJ].hasOwnProperty("mlen")&&0<valj_efb[iVJ].mlen?valj_efb[iVJ].mlen:0,maxlen=0!=Number(maxlen)?`maxlength="${maxlen}"`:"",minlen=valj_efb[iVJ].hasOwnProperty("milen")&&0<valj_efb[iVJ].milen?valj_efb[iVJ].milen:0,minlen=0!=Number(minlen)?`minlength="${minlen}"`:"",classes="range"!=elementId?`form-control ${valj_efb[iVJ].el_border_color} `:"form-range",ui=`
      ${label}
      <div class="efb  ${pos[3]} col-sm-12 px-0 mx-0 ttEfb show"  id='${rndm}-f'>
        ${ttip}
        <input type="${type}"   class="efb input-efb px-2 mb-0 emsFormBuilder_v w-100 ${classes} ${valj_efb[iVJ].el_height} ${corner} ${valj_efb[iVJ].el_text_color} ${1==valj_efb[iVJ].required||1==valj_efb[iVJ].required?"required":""}  efbField efb1 ${valj_efb[iVJ].classes.replace(","," ")}" data-id="${rndm}-el" data-vid='${rndm}' data-css="${rndm}" id="${rndm}_" placeholder="${valj_efb[iVJ].placeholder}"  ${0<valj_efb[iVJ].value.length?`value ="${valj_efb[iVJ].value}"`:""} ${maxlen} ${minlen} ${1!=previewSate?"readonly":""} ${"disabled"==disabled?"readonly":""}>
        `+desc,dataTag=elementId;break;case"pdate":classes="range"!=elementId?`form-control ${valj_efb[iVJ].el_border_color} `:"form-range",ui=`
      ${label}
      <div class="efb  ${pos[3]} col-sm-12 px-0 mx-0 ttEfb show"  id='${rndm}-f'>
        ${ttip}
        <input type="text"   class="efb pdpF2 input-efb px-2 mb-0 emsFormBuilder_v w-100 ${classes} ${valj_efb[iVJ].el_height} ${corner} ${valj_efb[iVJ].el_text_color} ${1==valj_efb[iVJ].required||1==valj_efb[iVJ].required?"required":""}  efbField efb1 ${valj_efb[iVJ].classes.replace(","," ")}" data-css="${rndm}" data-id="${rndm}-el" data-vid='${rndm}'  id="${rndm}_" placeholder="${valj_efb[iVJ].placeholder}"  ${0<valj_efb[iVJ].value.length?`value ="${valj_efb[iVJ].value}"`:""} ${1!=previewSate?"readonly":""}>
        `+desc,dataTag=elementId,"function"!=typeof rating_el_pro_efb&&(ui=public_pro_message());break;case"ardate":classes="range"!=elementId?`form-control ${valj_efb[iVJ].el_border_color} `:"form-range",ui=`
      ${label}
      <div class="efb  ${pos[3]} col-sm-12 px-0 mx-0 ttEfb show"  id='${rndm}-f'>
        ${ttip}
        <input type="text"   class="efb hijri-picker input-efb px-2 mb-0 emsFormBuilder_v w-100 ${classes}  ${valj_efb[iVJ].el_height} ${corner} ${valj_efb[iVJ].el_text_color} ${1==valj_efb[iVJ].required||1==valj_efb[iVJ].required?"required":""}  efbField efb1 ${valj_efb[iVJ].classes.replace(","," ")}" data-css="${rndm}" data-id="${rndm}-el" data-vid='${rndm}' id="${rndm}_" placeholder="${valj_efb[iVJ].placeholder}"  ${0<valj_efb[iVJ].value.length?`value ="${valj_efb[iVJ].value}"`:""} ${1!=previewSate?"readonly":""} ${"disabled"==disabled?"readonly":""}>
        `+desc,dataTag=elementId,"function"!=typeof rating_el_pro_efb&&(ui=public_pro_message());break;case"range":maxlen=valj_efb[iVJ].hasOwnProperty("mlen")?valj_efb[iVJ].mlen:100,minlen=valj_efb[iVJ].hasOwnProperty("milen")?valj_efb[iVJ].milen:0,temp=0<valj_efb[iVJ].value?valj_efb[iVJ].value:Math.round((Number(valj_efb[iVJ].mlen)+Number(valj_efb[iVJ].milen))/2),ui=`
        ${label}
        <div class="efb ${pos[3]} col-sm-12 px-0 mx-0 ttEfb show  "  id='${rndm}-f'>
          ${ttip}
          <div class="efb slider m-0 p-2 ${valj_efb[iVJ].el_height}  ${valj_efb[iVJ].el_text_color} efb1 ${valj_efb[iVJ].classes.replace(","," ")}" data-css="${rndm}" id='${rndm}-range'>
          <input type="${elementId}"  class="efb input-efb px-2 mb-0 emsFormBuilder_v w-100  ${1==valj_efb[iVJ].required||1==valj_efb[iVJ].required?"required":""}  efbField" data-id="${rndm}-el" data-vid='${rndm}' id="${rndm}_" oninput="fun_show_val_range_efb('${rndm}')"  ${0<valj_efb[iVJ].value.length?`value ="${temp}"`:""} min="${minlen}" max="${maxlen}" ${1!=previewSate?"readonly":""} ${"disabled"==disabled?"readonly":""}>
          <p id="${rndm}_rv" class="efb mx-1 py-0 my-1 fs-6 text-darkb">${temp||50}</p>
          </div>
          `+desc,dataTag=elementId;break;case"maps":ui=`
      ${label}
      <!-- ${rndm}-map -->
      ${ttip}
      ${"function"==typeof maps_el_pro_efb?maps_el_pro_efb(previewSate,pos,rndm,iVJ):public_pro_message()}
        `+desc,dataTag=elementId;break;case"file":ui=`
       ${label}
        <div class="efb  ${pos[3]} col-sm-12 px-0 mx-0 ttEfb show"  id='${rndm}-f'>
          ${ttip}        
          <input type="${elementId}" class="efb  input-efb px-2 pb-0 emsFormBuilder_v w-100  ${1==valj_efb[iVJ].required||1==valj_efb[iVJ].required?"required":""} ${valj_efb[iVJ].el_height} ${corner} ${valj_efb[iVJ].el_border_color}    form-control efb efbField efb1 ${valj_efb[iVJ].classes.replace(","," ")}" data-css="${rndm}" data-vid='${rndm}' data-id="${rndm}-el" id="${rndm}_" placeholder="${elementId}" ${1!=previewSate?"readonly":""} ${"disabled"==disabled?"readonly":""}>
          `+desc,dataTag=elementId;break;case"textarea":minlen=valj_efb[iVJ].hasOwnProperty("milen")&&0<valj_efb[iVJ].milen?valj_efb[iVJ].milen:0,minlen=0!=Number(minlen)?`minlength="${minlen}"`:"",ui=`
                ${label}
                <div class="efb  ${pos[3]} col-sm-12 px-0 mx-0 ttEfb show"  id='${rndm}-f' >
                ${ttip}
                <textarea  id="${rndm}_"  placeholder="${valj_efb[iVJ].placeholder}"  class="efb  px-2 input-efb emsFormBuilder_v form-control w-100 ${1==valj_efb[iVJ].required||1==valj_efb[iVJ].required?"required":""}  ${valj_efb[iVJ].el_height} ${corner} ${valj_efb[iVJ].el_text_color} ${valj_efb[iVJ].el_border_color}  efbField efb1 ${valj_efb[iVJ].classes.replace(","," ")}" data-css="${rndm}" data-vid='${rndm}' data-id="${rndm}-el"  value="${valj_efb[iVJ].value}" rows="5" ${1!=previewSate?"readonly":""} ${disabled} ${minlen}>${valj_efb[iVJ].value}</textarea>
                ${desc}
            `,dataTag="textarea";break;case"mobile":temp="function"==typeof create_intlTelInput_efb?create_intlTelInput_efb(rndm,iVJ,previewSate,corner):public_pro_message(),ui=`
                ${label}
                <div class="efb  ${pos[3]} col-sm-12 px-0 mx-0 ttEfb show"  id='${rndm}-f'>
                ${ttip}
                ${temp}
                ${desc}
            `,dataTag="textarea";break;case"dadfile":ui=`
      ${label}
      <div class="efb  ${pos[3]} col-sm-12 px-0 mx-0 ttEfb show" id='${rndm}-f'>
      ${desc}      
      ${ttip}
      ${"function"==typeof dadfile_el_pro_efb?dadfile_el_pro_efb(previewSate,rndm,iVJ):public_pro_message()}
      `,dataTag=elementId;break;case"checkbox":case"radio":case"payCheckbox":case"payRadio":case"chlCheckBox":case"chlRadio":case"imgRadio":if(dataTag=elementId,col=valj_efb[iVJ].hasOwnProperty("op_style")&&1!=Number(valj_efb[iVJ].op_style)?"col-md-"+12/Number(valj_efb[iVJ].op_style):"","radio"!=elementId&&"checkbox"!=elementId&&"chlRadio"!=elementId&&"chlCheckBox"!=elementId&&"imgRadio"!=elementId||(pay=""),temp="imgRadio"==elementId?"col-md-4 mx-0 px-2":"",0!=editState){let tp=dataTag.toLowerCase();var parent=valj_efb[iVJ];const optns_obj=valj_efb.filter(obj=>obj.parent===rndm),currency=valj_efb[0].hasOwnProperty("currency")?valj_efb[0].currency:"USD";for(const i of optns_obj){let checked="";(1!=tp.includes("radio")&&(1!=tp.includes("select")||0!=tp.includes("multi"))||!(parent.value==i.id_||i.hasOwnProperty("id_old")&&parent.value==i.id_old))&&(1!=tp.includes("multi")&&1!=tp.includes("checkbox")||"string"==typeof parent.value||-1==parent.value.findIndex(x=>x==i.id_||x==i.id_old))||(checked="checked");const prc=i.hasOwnProperty("price")?Number(i.price):0;optn+=`<div class="efb  form-check ${col} ${elementId} ${temp} efb1 ${valj_efb[iVJ].classes.replace(","," ")} mt-1" data-css="${rndm}" data-parent="${i.parent}" data-id="${i.id_}" id="${i.id_}-v">
          <input class="efb  form-check-input emsFormBuilder_v ${pay}  ${valj_efb[iVJ].el_text_size} " data-tag="${dataTag}" data-type="${vtype}" data-vid='${rndm}' type="${vtype}" name="${i.parent}" value="${i.value}" id="${i.id_}" data-id="${i.id_}-id" data-op="${i.id_}"${1!=previewSate?"readonly":""} ${disabled} ${checked}>
          ${"imgRadio"!=elementId?` <label class="efb ${valj_efb[iVJ].hasOwnProperty("pholder_chl_value")?"col-8":""}  ${valj_efb[iVJ].el_text_color}  ${valj_efb[iVJ].el_height} ${valj_efb[iVJ].label_text_size} hStyleOpEfb " id="${i.id_}_lab" for="${i.id_}">${i.value}</label>`:fun_imgRadio_efb(i.id_,i.src,i)}
          ${0!=elementId.includes("chl")?`<input type="text" class="efb ${valj_efb[iVJ].el_text_color}  ${valj_efb[iVJ].el_height} checklist col-2 hStyleOpEfb emsFormBuilder_v border-d" data-id="${i.id_}" data-type="${dataTag}" data-vid="" id="${i.id_}_chl" placeholder="${valj_efb[iVJ].pholder_chl_value}"  disabled>`:""}
          ${2<pay.length?`<span  class="efb col fw-bold  text-labelEfb h-d-efb hStyleOpEfb d-flex justify-content-end"><span id="${i.id_}-price" class="efb efb-crrncy">${prc.toLocaleString(lan_name_emsFormBuilder,{style:"currency",currency:currency})}</span></span>`:""}
          </div>`}}else{var type=Math.random().toString(36).substr(2,9),op_2=Math.random().toString(36).substr(2,9);const currency=valj_efb[0].hasOwnProperty("currency")?valj_efb[0].currency:"USD";optn=`
       <div class="efb  form-check  ${elementId}  ${temp} efb1 ${valj_efb[iVJ].classes.replace(","," ")}" data-css="${rndm}" data-id="${type}" data-parent="${rndm}" id="${type}-v">
       <input class="efb  emsFormBuilder_v form-check-input ${pay} ${valj_efb[iVJ].el_text_size} " type="${vtype}" name="${valj_efb[iVJ].id_}" value="${vtype}" id="${type}" data-id="${type}-id" data-op="${type}" ${1!=previewSate?"readonly":""} ${disabled}>
       ${"imgRadio"!=elementId?`<label class="efb ${valj_efb[iVJ].hasOwnProperty("pholder_chl_value")?"col-8":""}   ${valj_efb[iVJ].el_text_color}  ${valj_efb[iVJ].el_height} ${valj_efb[iVJ].label_text_size} hStyleOpEfb " id="${type}_lab">${efb_var.text.newOption} 1</label>`:fun_imgRadio_efb(type,"urlLin",valj_efb[iVJ])}
       ${0!=elementId.includes("chl")?`<input type="text" class="efb col ${valj_efb[iVJ].el_text_color}  ${valj_efb[iVJ].el_height} checklist col-2 hStyleOpEfb emsFormBuilder_v border-d" data-id="${valj_efb[iVJ].id_}" data-vid="" id="${valj_efb[iVJ].id_}_chl" placeholder="${valj_efb[iVJ].pholder_chl_value}" disabled>`:""}
       ${2<pay.length?`<span  class="efb col fw-bold  text-labelEfb h-d-efb hStyleOpEfb d-flex justify-content-end"><span id="${type}-price" class="efb efb-crrncy">${0..toLocaleString(lan_name_emsFormBuilder,{style:"currency",currency:currency})}</span></span>`:""}
       </div>
       <div class="efb  form-check ${elementId}  ${temp} efb1 ${valj_efb[iVJ].classes.replace(","," ")}" data-css="${rndm}" data-parent="${rndm}" data-id="${op_2}" id="${op_2}-v">
           <input class="efb  emsFormBuilder_v form-check-input ${pay}  ${valj_efb[iVJ].el_text_size} " type="${vtype}" name="${valj_efb[iVJ].id_}" value="${vtype}" id="${op_2}" data-id="${op_2}-id" data-op="${op_2}" ${1!=previewSate?"readonly":""} ${disabled}>
           ${"imgRadio"!=elementId?`<label class="efb ${valj_efb[iVJ].hasOwnProperty("pholder_chl_value")?"col-8":""}   ${valj_efb[iVJ].el_text_color}  ${valj_efb[iVJ].el_height} ${valj_efb[iVJ].label_text_size} hStyleOpEfb "  id="${op_2}_lab">${efb_var.text.newOption} 2</label>`:fun_imgRadio_efb(op_2,"urlLin",valj_efb[iVJ])}
           ${0!=elementId.includes("chl")?`<input type="text" class="efb col ${valj_efb[iVJ].el_text_color}  ${valj_efb[iVJ].el_height} checklist col-2 hStyleOpEfb emsFormBuilder_v border-d" data-id="${valj_efb[iVJ].id_}" data-vid="" id="${valj_efb[iVJ].id_}_chl" placeholder="${valj_efb[iVJ].pholder_chl_value}" disabled>`:""}
           ${2<pay.length?`<span  class="efb col fw-bold  text-labelEfb h-d-efb hStyleOpEfb d-flex justify-content-end"><span id="${op_2}-price" class="efb efb-crrncy">${0..toLocaleString(lan_name_emsFormBuilder,{style:"currency",currency:currency})}</span></span>`:""}
       </div>`,temp="1",tp="2","imgRadio"==elementId&&(temp="",tp=""),optionElpush_efb(rndm,efb_var.text.newOption+" "+temp,type,type,dataTag),optionElpush_efb(rndm,efb_var.text.newOption+" "+tp,op_2,op_2,dataTag)}temp="imgRadio"==elementId?"row  justify-content-center":"",ui=`
      <!-- checkbox -->
      ${label}
      <div class="efb  ${pos[3]} col-sm-12 px-0 mx-0 py-0 my-0 ttEfb show"   data-id="${rndm}-el" id='${rndm}-f'>
      ${ttip}
      <div class="efb  ${1==valj_efb[iVJ].required||1==valj_efb[iVJ].required?"required":""} ${""!=col?"row col-md-12":""} ${temp} efb1 ${valj_efb[iVJ].classes.replace(","," ")}" data-css="${rndm}" id="${rndm}_options">
        ${optn}
        </div>
        <div class="efb  mb-3">${desc}</div>
        <!-- end checkbox -->
        `;break;case"switch":valj_efb[iVJ].on=(valj_efb[iVJ].hasOwnProperty("on")?valj_efb[iVJ]:efb_var.text).on,valj_efb[iVJ].off=(valj_efb[iVJ].hasOwnProperty("off")?valj_efb[iVJ]:efb_var.text).off,ui=`
      ${label}
      ${ttip}
      <div class="efb ${pos[3]} col-sm-12 px-0 mx-0 ttEfb show" id ="${rndm}-f">
      <label class="efb fs-6" id="${rndm}_off">${valj_efb[iVJ].off}</label>
      <button type="button"  data-state="off" class="efb btn   ${valj_efb[iVJ].el_height}  btn-toggle efb1 ${valj_efb[iVJ].classes.replace(","," ")}" data-css="${rndm}" data-toggle="button" aria-pressed="false" autocomplete="off" data-vid='${rndm}' onClick="fun_switch_efb(this)" data-id="${rndm}-el" id="${rndm}_" ${1!=previewSate?"disabled":""} ${disabled}>
        <div class="efb handle"></div>
      </button>
      <label class="efb fs-6" id="${rndm}_on">${valj_efb[iVJ].on}</label>
      
    

   <!--   <div class="efb  ${pos[3]} col-sm-12 px-0 mx-0 ttEfb show" id ="${rndm}-f">
      <div class="efb  form-check form-switch   ${valj_efb[iVJ].el_height} efb1 ${valj_efb[iVJ].classes.replace(","," ")}" data-css="${rndm}" id="${rndm}-switch">
        <input class="efb d-none emsFormBuilder_v efb-switch form-check-input efbField" type="checkbox" data-vid='${rndm}' data-id="${rndm}-el" id="${rndm}_" ${1!=previewSate?"disabled":""} ${disabled}>
      </div> -->
      <div class="efb  mb-3">${desc}</div>
      `,"function"!=typeof rating_el_pro_efb&&(ui=public_pro_message()),dataTag=elementId;break;case"esign":ui=`
      ${label}
      ${ttip}
      
      ${"function"==typeof esign_el_pro_efb?esign_el_pro_efb(previewSate,pos,rndm,iVJ,desc):public_pro_message()}
      `,dataTag=elementId;break;case"rating":ui=`
      ${ttip}
      ${label}
      ${"function"==typeof rating_el_pro_efb?rating_el_pro_efb(previewSate,pos,rndm,iVJ):public_pro_message()}
      
      <div class="efb  mb-3">${desc}</div>
        `,dataTag=elementId;break;case"steps":dataTag="step";let del="";if(1<step_el_efb&&(del=`
          <button type="button" class="efb  btn btn-edit btn-sm" id="${valj_efb[iVJ].id_}"
          data-id="id1" data-bs-toggle="tooltip" title="${efb_var.text.delete}"
          onclick="show_delete_window_efb('${valj_efb[iVJ].id_}' ,${iVJ})">
          <i class="efb  bi-x-lg text-danger"></i>
          </button>`),step_el_efb<=2||2<step_el_efb&&1==pro_efb){valj_efb[0].steps=0==editState?step_el_efb:valj_efb[0].steps;type=""!=valj_efb[iVJ].classes?"efb1 "+valj_efb[iVJ].classes.replace(","," "):"";const sort=iVJ<3?"unsortable":"sortable";newElement+=` 
        <setion class="efb ${sort}  row my-2  ${shwBtn} efbField stepNavEfb stepNo ${type}" data-step="${valj_efb[iVJ].id_}" id="${valj_efb[iVJ].id_}" data-amount="${step_el_efb}" data-id="${valj_efb[iVJ].id_}" data-tag="${elementId}">
       <!-- <div class="efb  row my-2  ${shwBtn} efbField ${valj_efb[iVJ].classes.replace(","," ")} stepNavEfb" data-step="${valj_efb[iVJ].id_}" id="${valj_efb[iVJ].id_}" data-amount="${step_el_efb}" data-id="${valj_efb[iVJ].id_}" data-tag="${elementId}"> -->
        <h2 class="efb  col-md-10 col-sm-12 mx-2 my-0"><i class="efb  ${valj_efb[iVJ].icon} ${valj_efb[iVJ].label_text_size} ${valj_efb[iVJ].icon_color} "
        id="${valj_efb[iVJ].id_}_icon"></i> <span id="${valj_efb[iVJ].id_}_lab" class="efb  ${valj_efb[iVJ].label_text_size}  ${valj_efb[iVJ].label_text_color}  ">${valj_efb[iVJ].name}</span></span></h2>
        <small id="${valj_efb[iVJ].id_}-des" class="efb  form-text ${valj_efb[iVJ].message_text_color} border-bottom px-4">${valj_efb[iVJ].message}</small>
       
        <div class="efb  col-md-10 col-sm-12">
        <div class="efb  btn-edit-holder d-none" id="btnSetting-${valj_efb[iVJ].id_}">
        <button type="button" class="efb  btn btn-edit btn-sm BtnSideEfb" id="settingElEFb"
        data-id="id1" data-bs-toggle="tooltip" title="${efb_var.text.edit}"
        onclick="show_setting_window_efb('${valj_efb[iVJ].id_}')">
        <div class="icon-container efb"><i class="efb bi-gear-wide-connected  text-success BtnSideEfb" ></i></div>
        </button>
          ${del}
        </div>
        </div>
        <!--  </div> -->
        </setion>
        `}else pro_show_efb(2);break;case"select":case"paySelect":case"city":case"cityList":if("select"==elementId&&(pay=""),0!=editState){const optns_obj=valj_efb.filter(obj=>obj.parent===rndm);var indx_parent=valj_efb.findIndex(x=>x.id_==rndm),id_selected=valj_efb[indx_parent].value;for(const i of optns_obj){var selected=i.id_==id_selected?"selected":"";optn+=`<option value="${i.value}" id="${i.id_}" data-id="${i.id_}" data-op="${i.id_}" class="efb ${valj_efb[indx_parent].el_text_color}  emsFormBuilder_v efb" ${selected}>${i.value}</option>`}}else optn=`
        <option value="${efb_var.text.newOption} 1" id="${rndm_1}" data-vid='${rndm}' data-id="${op_3}" data-op="${op_3}" class="efb text-dark efb  " >${efb_var.text.newOption} 1</option>
        <option value="${efb_var.text.newOption} 2" id="${rndm_2}" data-vid='${rndm}' data-id="${op_4}" data-op="${op_4}" class="efb text-dark efb " >${efb_var.text.newOption} 2</option>
       `,optionElpush_efb(rndm,efb_var.text.newOption+" 1",rndm_1,op_3,dataTag),optionElpush_efb(rndm,efb_var.text.newOption+" 2",rndm_2,op_4,dataTag);ui=`
      ${label}
      <div class="efb ${pos[3]} col-sm-12 px-0 mx-0 ttEfb show efb1  ${valj_efb[iVJ].classes.replace(","," ")}"  data-css="${rndm}"   id='${rndm}-f'  data-id="${rndm}-el" >
      ${ttip}
      <select class="efb form-select efb emsFormBuilder_v w-100 ${pay}  ${1==valj_efb[iVJ].required||1==valj_efb[iVJ].required?"required":""} ${valj_efb[iVJ].el_height} ${corner} ${valj_efb[iVJ].el_border_color}  w-100 " data-vid='${rndm}' id="${rndm}_options" ${1!=previewSate?"readonly":""} ${disabled}>
      <option selected disabled>${efb_var.text.nothingSelected}</option>
      ${optn}
      </select>
      ${desc}
      `,dataTag=elementId;break;case"conturyList":case"country":optn="function"==typeof countryList_el_pro_efb?countryList_el_pro_efb(rndm,rndm_1,op_3,op_4,editState):"null",ui=`
        ${label}
        <div class="efb ${pos[3]} col-sm-12 efb  px-0 mx-0 ttEfb show efb1 ${valj_efb[iVJ].classes.replace(","," ")}" data-css="${rndm}"  id='${rndm}-f'  data-id="${rndm}-el" >
        ${ttip}
        <select class="efb form-select efb w-100 emsFormBuilder_v w-100 ${1==valj_efb[iVJ].required||1==valj_efb[iVJ].required?"required":""} ${valj_efb[iVJ].el_height} ${corner} ${valj_efb[iVJ].el_border_color}  " data-vid='${rndm}' id="${rndm}_options" ${1!=previewSate?"readonly":""} ${disabled}>
        <option selected disabled>${efb_var.text.nothingSelected}</option>
        ${optn}
        </select>
        ${desc}
        `,"null"==optn&&(ui=public_pro_message()),dataTag=elementId;break;case"stateProvince":case"statePro":valj_efb.push({id_:"NIR",dataId:"NIR-id",parent:rndm,type:"option",value:"Northern Ireland",id_op:"_N_o_r_t_h_e_r_n_ _I_r_e_l_a_n_d_",step:valj_efb[iVJ].step,amount:valj_efb[iVJ].amount},{id_:"ENG",dataId:"ENG-id",parent:rndm,type:"option",value:"England",id_op:"_E_n_g_l_a_n_d_",step:valj_efb[iVJ].step,amount:valj_efb[iVJ].amount},{id_:"SCO",dataId:"SCO-id",parent:rndm,type:"option",value:"Scotland",id_op:"_S_c_o_t_l_a_n_d_",step:valj_efb[iVJ].step,amount:valj_efb[iVJ].amount},{id_:"WAL",dataId:"WAL-id",parent:rndm,type:"option",value:"Wales",id_op:"_W_a_l_e_s_",step:valj_efb[iVJ].step,amount:valj_efb[iVJ].amount}),optn="function"==typeof statePrevion_el_pro_efb?statePrevion_el_pro_efb(rndm,rndm_1,op_3,op_4,editState):"null",ui=`
        ${label}
        <div class="efb ${pos[3]} col-sm-12 px-0 mx-0 ttEfb show efb1 ${valj_efb[iVJ].classes.replace(","," ")}" data-css="${rndm}"  id='${rndm}-f'  data-id="${rndm}-el" >
        ${ttip}
        <select class="efb form-select emsFormBuilder_v w-100 ${1==valj_efb[iVJ].required||1==valj_efb[iVJ].required?"required":""} ${valj_efb[iVJ].el_height} ${corner} ${valj_efb[iVJ].el_border_color}  " data-vid='${rndm}' id="${rndm}_options" ${1!=previewSate?"readonly":""} ${disabled}>
        <option selected disabled>${efb_var.text.nothingSelected}</option>
        ${optn}
        </select>
        ${desc}
        `,dataTag=elementId,"null"==optn&&(ui=public_pro_message());break;case"multiselect":case"payMultiselect":"multiselect"==elementId&&(pay=""),dataTag="multiselect";var currency=valj_efb[0].hasOwnProperty("currency")?valj_efb[0].currency:"USD";let va="",sl="";if(0!=editState){optn="\x3c!--opt--\x3e";const optns_obj=valj_efb.filter(obj=>obj.parent===rndm),indx_parent=valj_efb.findIndex(x=>x.id_==rndm);var s=0<valj_efb[indx_parent].value.length;for(const i of optns_obj){let c="efb bi-square efb";1==s&&-1!=valj_efb[indx_parent].value.findIndex(x=>x==i.id_)&&(c="bi-check-square text-info efb",va+=i.value+",",sl+=i.id_+" @efb!"),optn+=`<tr class="efb  efblist ${valj_efb[indx_parent].el_text_color}  ${pay}" data-id="${rndm}" data-name="${i.value}" data-row="${i.id_}" data-state="0" data-visible="1">
          <th scope="row" class="${c}"></th><td class="efb  ms col-12">${i.value}</td>
          ${2<pay.length?`<td class="efb ms fw-bold text-center"><span id="${i.id_}-price" class="efb efb-crrncy">${Number(i.price).toLocaleString(lan_name_emsFormBuilder,{style:"currency",currency:currency})}</span></td>`:""}
        </tr>  `}}else{optn=`
        <tr class="efb list  ${pay}" data-id="menu-${rndm}" data-name="${efb_var.text.blue}" data-row="${op_3}" data-state="0" data-visible="1">
        <th scope="row" class="efb bi-square efb"></th><td class="efb  ms col-12">${efb_var.text.blue}</td>
        ${2<pay.length?`<td class="efb ms fw-bold text-center"><span id="${op_3}-price" class="efb efb-crrncy">${Number(0).toLocaleString(lan_name_emsFormBuilder,{style:"currency",currency:currency})}</span></td>`:""}
        </tr>
      <tr class="efb list  ${pay}" data-id="menu-${rndm}" data-name="${efb_var.text.Red}" data-row="${op_4}" data-state="0" data-visible="1">
        <th scope="row" class="efb bi-square efb"></th><td class="efb  ms col-12">${efb_var.text.Red}</td>                  
        ${2<pay.length?`<td class="efb ms fw-bold text-center"><span id="${op_4}-price" class="efb efb-crrncy">${Number(0).toLocaleString(lan_name_emsFormBuilder,{style:"currency",currency:currency})}</span></td>`:""}
      </tr>
      <tr class="efb list  ${pay}" data-id="menu-${rndm}" data-name="${efb_var.text.yellow}" data-row="${op_5}" data-state="0" data-visible="1">
        <th scope="row" class="efb bi-square efb"></th><td class="efb  ms col-12">${efb_var.text.yellow}</td>
        ${2<pay.length?`<td class="efb ms fw-bold text-center"><span id="${op_5}-price" class="efb efb-crrncy">${Number(0).toLocaleString(lan_name_emsFormBuilder,{style:"currency",currency:currency})}</span></td>`:""}
      </tr>  
       `;optionElpush_efb(rndm,""+efb_var.text.blue,""+op_3,op_3,dataTag),optionElpush_efb(rndm,""+efb_var.text.Red,""+op_4,op_4,dataTag),optionElpush_efb(rndm,""+efb_var.text.yellow,""+op_5,op_5,dataTag)}ui=` 
      ${label}
      <!--multiselect-->      
      <div class="efb  ${pos[3]} col-sm-12 listSelect px-0 mx-0 ttEfb show efb1 ${valj_efb[iVJ].classes.replace(","," ")}" data-css="${rndm}"   id='${rndm}-f' data-id="${rndm}-el" >
        ${ttip}
        <div class="efb efblist  mx-0  inplist ${pay}  ${1!=previewSate?"disabled":""} ${disabled}  ${1==valj_efb[iVJ].required||1==valj_efb[iVJ].required?"required":""} ${valj_efb[iVJ].el_height} ${corner} ${valj_efb[iVJ].el_border_color} bi-chevron-down" data-id="menu-${rndm}"   data-no="${valj_efb[iVJ].maxSelect}" data-min="${valj_efb[iVJ].minSelect}" data-parent="1" data-icon="1" data-select="${sl}"  data-vid='${rndm}' id="${rndm}_options" > ${0==va.length?efb_var.text.selectOption:va}</div>
      
        <div class="efb efblist mx-0  listContent shadow d-none border rounded-bottom bg-light" data-id="menu-${rndm}" data-list="menu-${rndm}">
        <table class="efb table menu-${rndm}">
         <thead class="efb efblist">
           <tr> <div class="efb searchSection efblist p-2 bg-light"> 
           <!-- <i class="efb efblist searchIcon  bi-search text-primary "></i> -->
               <input type="text" class="efb efblist search searchBox my-1 col-12 rounded " data-id="menu-${rndm}" data-tag="search" placeholder="üîç ${efb_var.text.search}" onkeyup="FunSearchTableEfb('menu-${rndm}')"> </div>
         </tr> </thead>
         <tbody class="efb fs-7">                  
          ${optn}
         </tbody>
       </table>
      </div>            
      ${desc}
       `,dataTag=elementId;break;case"html":dataTag=elementId,ui="function"==typeof html_el_pro_efb?html_el_pro_efb(previewSate,rndm,iVJ):public_pro_message();break;case"yesNo":dataTag=elementId,ui=`
      ${label}
      ${ttip}
      ${"function"==typeof yesNi_el_pro_efb?yesNi_el_pro_efb(previewSate,pos,rndm,iVJ):public_pro_message()}
     
        `+desc;break;case"link":dataTag=elementId,ui="function"==typeof link_el_pro_efb?link_el_pro_efb(previewSate,pos,rndm,iVJ):public_pro_message();break;case"stripe":if(1!=addons_emsFormBuilder.AdnSPF)return alert_message_efb(efb_var.text.error,efb_var.text.IMAddonP,20,"danger"),op_2=valj_efb.length-1,valj_efb.splice(op_2,1),"null";{let sub=efb_var.text.onetime,cl="one";"charge"!=valj_efb[0].paymentmethod&&(type=valj_efb[0].paymentmethod+"ly",sub=efb_var.text[type],cl=valj_efb[0].paymentmethod),dataTag=elementId,ui="function"==typeof add_ui_stripe_efb?add_ui_stripe_efb(rndm,cl,sub):public_pro_message(),valj_efb[0].type="payment",form_type_emsFormBuilder=valj_efb[0].type}break;case"persiaPay":case"zarinPal":if(1!=addons_emsFormBuilder.AdnPPF){alert_message_efb(efb_var.text.error,efb_var.text.IMAddonP,20,"danger");const l=valj_efb.length-1;return valj_efb.splice(l,1),"null"}valj_efb[0].type="payment",form_type_emsFormBuilder=valj_efb[0].type,dataTag=elementId,valj_efb[0].paymentmethod="charge",ui="function"==typeof add_ui_persiaPay_efb?add_ui_persiaPay_efb(rndm):public_pro_message();break;case"heading":dataTag=elementId,ui="function"==typeof headning_el_pro_efb?headning_el_pro_efb(rndm,pos,iVJ):public_pro_message();break;case"booking":dataTag=elementId;break;case"pointr10":temp="function"==typeof pointer10_el_pro_efb?pointer10_el_pro_efb(previewSate,classes,iVJ):public_pro_message(),ui=`
      ${label}
      <div class="efb  ${pos[3]} col-sm-12 px-0 mx-0 ttEfb show"  id='${rndm}-f'>
        ${ttip}
        ${temp}
        `+desc,dataTag=elementId;break;case"pointr5":temp="function"==typeof pointer5_el_pro_efb?pointer5_el_pro_efb(previewSate,classes,iVJ):public_pro_message(),ui=`
      ${label}
      <div class="efb  ${pos[3]} col-sm-12 px-0 mx-0 ttEfb show"  id='${rndm}-f'>
        ${ttip}
        ${temp}
        `+desc,dataTag=elementId;break;case"smartcr":temp="function"==typeof smartcr_el_pro_efb?smartcr_el_pro_efb(previewSate,classes,iVJ):public_pro_message(),ui=`
      ${label}
      <div class="efb  ${pos[3]} col-sm-12 px-0 mx-0 ttEfb show"  id='${rndm}-f'>
        ${ttip}
        ${temp}
        `+desc,dataTag=elementId;break;case"table_matrix":if(type_field_efb=elementId,dataTag=elementId,col=valj_efb[iVJ].hasOwnProperty("op_style")&&1!=Number(valj_efb[iVJ].op_style)?"col-md-"+12/Number(valj_efb[iVJ].op_style):"","radio"!=elementId&&"checkbox"!=elementId&&"chlRadio"!=elementId&&"chlCheckBox"!=elementId||(pay=""),0!=editState)for(const i of optns_obj=valj_efb.filter(obj=>obj.parent===rndm))prc=i.hasOwnProperty("price")?Number(i.price):0,optn+=`
            
            <div class="efb  col-sm-12 ${col} row my-1" data-id="${i.id_}" data-parent="${i.parent}" id="${i.id_}-v">
              <div class="efb my-2  col-md-8 fs-6  ${valj_efb[iVJ].el_text_color}  ${valj_efb[iVJ].el_height} ${valj_efb[iVJ].label_text_size}" id="${i.id_}_lab">${i.value}</div>
              <div class="efb col-md-4  d-flex justify-content-${position_l_efb} " id="${i.id_}" > 
                  <div class="efb btn btn-secondary text-white mx-1 ${1!=previewSate?"disabled":""} ${disabled}"  data-point="1"  data-id="${i.id_}"  onclick="fun_point_rating(this)"> <i class="efb bi-star-fill" data-icon="${i.id_}"></i></div>
                  <div class="efb btn btn-secondary text-white mx-1 ${1!=previewSate?"disabled":""} ${disabled}"  data-point="2"  data-id="${i.id_}"  onclick="fun_point_rating(this)"> <i class="efb bi-star-fill" data-icon="${i.id_}"></i></div>
                  <div class="efb btn btn-secondary text-white mx-1 ${1!=previewSate?"disabled":""} ${disabled}"  data-point="3"  data-id="${i.id_}"  onclick="fun_point_rating(this)"> <i class="efb bi-star-fill" data-icon="${i.id_}"></i></div>
                  <div class="efb btn btn-secondary text-white mx-1 ${1!=previewSate?"disabled":""} ${disabled}"  data-point="4"  data-id="${i.id_}"  onclick="fun_point_rating(this)"> <i class="efb bi-star-fill" data-icon="${i.id_}"></i></div>
                  <div class="efb btn btn-secondary text-white mx-1 ${1!=previewSate?"disabled":""} ${disabled}"  data-point="5"  data-id="${i.id_}"  onclick="fun_point_rating(this)"> <i class="efb bi-star-fill" data-icon="${i.id_}"></i></div>
                  <input type="hidden" class="efb emsFormBuilder_v" data-vid="${i.id_}" data-parent="${i.parent} data-type="rating"  id="${i.id_}-point-rating" >
              </div>                                            
          </div>
          <!-- end r_matrix -->
            `;else{const op_1=Math.random().toString(36).substr(2,9),op_2=Math.random().toString(36).substr(2,9),pv=0;optn=`
          <div class="efb   col-sm-12 row my-1" data-id="${op_1}" data-parent="${rndm}" id="${op_1}-v">
              <div class="efb my-2 col-md-8 fs-6 ${valj_efb[iVJ].el_text_color}  ${valj_efb[iVJ].el_height} ${valj_efb[iVJ].label_text_size}" id="${op_1}_lab">${efb_var.text.newOption}</div>
              <div class="efb col-md-4 d-flex justify-content-${position_l_efb} " id="${op_1}" > 
                  <div class="efb btn btn-secondary text-white mx-1 ${1!=previewSate?"disabled":""} ${disabled}"  data-point="1"  data-id="${op_1}"  onclick="fun_point_rating(this)"> <i class="efb bi-star-fill"></i></div>
                  <div class="efb btn btn-secondary text-white mx-1 ${1!=previewSate?"disabled":""} ${disabled}"  data-point="2"  data-id="${op_1}"  onclick="fun_point_rating(this)"> <i class="efb bi-star-fill"></i></div>
                  <div class="efb btn btn-secondary text-white mx-1 ${1!=previewSate?"disabled":""} ${disabled}"  data-point="3"  data-id="${op_1}"  onclick="fun_point_rating(this)"> <i class="efb bi-star-fill"></i></div>
                  <div class="efb btn btn-secondary text-white mx-1 ${1!=previewSate?"disabled":""} ${disabled}"  data-point="4"  data-id="${op_1}"  onclick="fun_point_rating(this)"> <i class="efb bi-star-fill"></i></div>
                  <div class="efb btn btn-secondary text-white mx-1 ${1!=previewSate?"disabled":""} ${disabled}"  data-point="5"  data-id="${op_1}"  onclick="fun_point_rating(this)"> <i class="efb bi-star-fill"></i></div>
                  <input type="hidden" data-vid="${op_1}" data-parent="${rndm} data-type="rating"  id="${op_1}-point-rating" >
              </div>                                            
          </div>
          <div class="efb col-md-12    col-sm-12 row my-1" data-id="${op_2}" data-parent="${rndm}" id="${op_2}-v">
              <div class="efb my-2 col-md-8 fs-6 ${valj_efb[iVJ].el_text_color}  ${valj_efb[iVJ].el_height} ${valj_efb[iVJ].label_text_size}" id="${op_2}_lab">${efb_var.text.newOption}</div>
              <div class="efb col-md-4  d-flex justify-content-${position_l_efb} " id="${op_2}" > 
                  <div class="efb btn btn-secondary text-white mx-1 ${1!=previewSate?"disabled":""} ${disabled}"  data-point="1"  data-id="${op_2}"  onclick="fun_point_rating(this)"> <i class="efb bi-star-fill"></i></div>
                  <div class="efb btn btn-secondary text-white mx-1 ${1!=previewSate?"disabled":""} ${disabled}"  data-point="2"  data-id="${op_2}"  onclick="fun_point_rating(this)"> <i class="efb bi-star-fill"></i></div>
                  <div class="efb btn btn-secondary text-white mx-1 ${1!=previewSate?"disabled":""} ${disabled}"  data-point="3"  data-id="${op_2}"  onclick="fun_point_rating(this)"> <i class="efb bi-star-fill"></i></div>
                  <div class="efb btn btn-secondary text-white mx-1 ${1!=previewSate?"disabled":""} ${disabled}"  data-point="4"  data-id="${op_2}"  onclick="fun_point_rating(this)"> <i class="efb bi-star-fill"></i></div>
                  <div class="efb btn btn-secondary text-white mx-1 ${1!=previewSate?"disabled":""} ${disabled}"  data-point="5"  data-id="${op_2}"  onclick="fun_point_rating(this)"> <i class="efb bi-star-fill"></i></div>
                  <input type="hidden" data-vid="${op_2}" data-parent="${rndm} data-type="rating"  id="${op_2}-point-rating" >
              </div>                                            
          </div>`,r_matrix_push_efb(rndm,efb_var.text.newOption,op_1,op_1),r_matrix_push_efb(rndm,efb_var.text.newOption,op_2,op_2)}ui=`
        <!-- table matrix -->
        ${label}
          <div class="efb  ${pos[3]} col-sm-12 px-0 mx-0 ttEfb show"   data-id="${rndm}-el" id='${rndm}-f'>
            ${ttip}
            <div class="efb  ${1==valj_efb[iVJ].required||1==valj_efb[iVJ].required?"required":""} ${""!=col?"row col-md-12":""} efb1  ${valj_efb[iVJ].classes.replace(","," ")}" id="${rndm}_options">
              ${optn}
            </div>
            <div class="efb  mb-3">${desc}</div>
          
          <!-- end table matrix -->
          `;break;case"terms":dataTag=elementId,ui="function"==typeof terms_el_pro_efb?terms_el_pro_efb(previewSate,rndm,iVJ):public_pro_message(),console.log(ui)}var pro_el,proActiv,tagId,tagT,sort="login"==formName_Efb&&("emaillogin"==valj_efb[iVJ].id_||"passwordlogin"==valj_efb[iVJ].id_)||"register"==formName_Efb&&("usernameRegisterEFB"==valj_efb[iVJ].id_||"passwordRegisterEFB"==valj_efb[iVJ].id_||"emailRegisterEFB"==valj_efb[iVJ].id_);return"form"!=elementId&&"step"!=dataTag&&(1==previewSate&&"option"!=elementId||1!=previewSate)?(pro_el=!!valj_efb[iVJ].hasOwnProperty("pro")&&valj_efb[iVJ].pro,sort=` <div class="efb btn-edit-holder d-none efb" id="btnSetting-${rndm}-id">
    <button type="button" class="efb  btn btn-edit btn-sm BtnSideEfb" id="settingElEFb"  data-id="${rndm}-id" data-bs-toggle="tooltip"  title="${efb_var.text.edit}" onclick="show_setting_window_efb('${rndm}-id')">
    <div class="icon-container efb"><i class="efb bi-gear-wide-connected  text-success BtnSideEfb"></i></div>
    </button>
    
    <!--<button type="button" class="efb  btn btn-edit btn-sm" id="dupElEFb" data-id="${rndm}-id"  data-bs-toggle="tooltip"  title="${efb_var.text.duplicate}" onclick="show_duplicate_fun('${rndm}-id')">
    <i class="efb  bi-files text-warning"></i> -->
    </button>
    ${sort?"":`<button type="button" class="efb  btn btn-edit btn-sm" id="deleteElEFb"   data-id="${rndm}-id" data-bs-toggle="tooltip"  title="${efb_var.text.delete}" onclick="show_delete_window_efb('${rndm}-id' ,${iVJ})"> <i class="efb  bi-x-lg text-danger"></i></button>`}
    <span class="efb  btn btn-edit btn-sm "  id="moveElEFb" onclick="move_show_efb()"><i class="efb text-dark bi-arrows-move"></i></span>
    `,proActiv=`‚≠ê 
    <div class="efb btn-edit-holder efb d-none zindex-10-efb " id="btnSetting-${rndm}-id">
    <button type="button" class="efb btn efb pro-bg btn-pro-efb btn-sm px-2 mx-3" id="pro" data-id="${rndm}-id" data-bs-toggle="tooltip"  title="${efb_var.text.proVersion}" onclick="pro_show_efb(1)"> 
    <i class="efb  bi-gem pro"> ${efb_var.text.pro}</i>`,endTags=0==previewSate?"</button> </button></div></div>":"</div></div>",tagId="firstName"==elementId||"lastName"==elementId?"text":elementId,tagT="esign"==elementId||"yesNo"==elementId||"rating"==elementId?"":"def",newElement+=`
    ${0==previewSate?`<setion class="efb my-1 px-0 mx-0 ttEfb ${1!=previewSate?disabled:""} ${0==previewSate&&1==valj_efb[iVJ].hidden?"hidden":""} ${1!=previewSate||"col-md-12"!=pos[1]&&"col-md-10"!=pos[1]?"position-relative":"mx-0 px-0"} ${1==previewSate?pos[0]+" "+pos[1]:""+ps} row col-sm-12 ${shwBtn} efbField ${"step"==dataTag?"step":""}" data-step="${step_el_efb}" data-amount="${amount_el_efb}" data-id="${rndm}-id" id="${rndm}" data-tag="${tagId}"  >`:""}
    ${0==previewSate&&1==valj_efb[iVJ].hidden?hiddenMarkEl(valj_efb[iVJ].id_):""}
    <div class="efb my-1 mx-0  ${elementId} ${tagT} ${t} ${1==previewSate?disabled:""}  ttEfb ${1==previewSate?pos[0]+" "+pos[1]:ps+" row"} col-sm-12 ${shwBtn} efbField ${"step"==dataTag?"step":""}" data-step="${step_el_efb}" data-amount="${amount_el_efb}" data-id="${rndm}-id" id="${rndm}" data-tag="${tagId}"  >
    ${1==previewSate&&"option"!=elementId||1!=previewSate?ui:""}
    ${1!=previewSate&&0==pro_efb&&1==pro_el?proActiv:""}
    ${1!=previewSate?sort:"\x3c!--efb.app--\x3e"}
    ${1!=previewSate&&0==pro_efb&&1==pro_el?"</div>":""}
    ${1==previewSate&&"option"!=elementId&&"html"!=elementId&&"stripe"!=elementId&&"heading"!=elementId&&"link"!=elementId||1!=previewSate?endTags:"</div>"}

    ${0==previewSate?" </setion>\x3c!--endTag EFB--\x3e":""}
     <!--endTag EFB-->
    `):"step"==dataTag&&1!=previewSate&&("steps"==elementId&&0==pro_efb&&3==Number(step_el_efb)?(amount_el_efb=Number(amount_el_efb)-1,step_el_efb=2,valj_efb[0].steps=2):valj_efb[0].steps=step_el_efb,document.getElementById("button_group")?1<valj_efb[0].steps&&(fun_handle_buttons_efb(!0),fub_shwBtns_efb()):(add_buttons_zone_efb(0,"dropZoneEFB"),fub_shwBtns_efb())),newElement}const public_pro_message=()=>`<div class="efb text-white fs-6 bg-danger px-1 rounded px-2">${efb_var.text.tfnapca}</div>`,hiddenMarkEl=id=>`
<div id="${id}-hidden">
<!--<button type="button" class="efb btn efb pro-bg btn-pro-efb btn-sm px-2 mx-3" id="pro"  data-bs-toggle="tooltip" onclick="pro_show_efb(1)"> -->
<i class="efb  bi-eye-slash pro efb-hidden mx-3" > ${efb_var.text.hField}</i>
</div>
`,funSetPosElEfb=(dataId,position)=>{var indx=valj_efb.findIndex(x=>x.dataId==dataId);-1!=indx&&(valj_efb[indx].label_position=position),"stripe"!=valj_efb[indx].type&&"html"!=valj_efb[indx].type&&get_position_col_el(dataId,!0)},funSetAlignElEfb=(dataId,align,element)=>{var indx=valj_efb.findIndex(x=>x.dataId==dataId);if(-1!=indx)switch(element){case"label":document.getElementById(valj_efb[indx].id_+"_labG").className=alignChangerEfb(document.getElementById(valj_efb[indx].id_+"_labG").className,align),valj_efb[indx].label_align=align;break;case"description":var elm=document.getElementById(valj_efb[indx].id_+"-des");elm.className=alignChangerElEfb(elm.className,align),"justify-content-start"!=(valj_efb[indx].message_align=align)&&1==elm.classList.contains("mx-4")?elm.classList.remove("mx-4"):"justify-content-start"==align&&0==elm.classList.contains("mx-4")&&elm.classList.add("mx-4")}},loadingShow_efb=title=>`<div class="efb modal-dialog modal-dialog-centered efb"  id="settingModalEfb_" >
 <div class="efb modal-content efb " id="settingModalEfb-sections">
     <div class="efb modal-header efb">
         <h5 class="efb modal-title fs-5" ><i class="efb bi-ui-checks mx-2 efb" id="settingModalEfb-icon"></i><span id="settingModalEfb-title">${title||efb_var.text.loading} </span></h5>
     </div>
     <div class="efb modal-body efb" id="settingModalEfb-body">
         ${loading_messge_efb()}
     </div>
 </div>
</div>`;let fun_handle_buttons_efb=state=>{setTimeout(()=>{1==state&&document.getElementById("f_btn_send_efb").classList.contains("d-block")?(document.getElementById("f_btn_send_efb").classList.add("d-none"),document.getElementById("f_button_form_np").classList.contains("d-none")&&(document.getElementById("f_button_form_np").classList.remove("d-none"),document.getElementById("f_button_form_np").classList.add("d-block"))):0==state&&(document.getElementById("f_button_form_np").classList.contains("d-block")&&document.getElementById("f_button_form_np").classList.remove("d-block"),document.getElementById("f_button_form_np").classList.add("d-none"),document.getElementById("f_btn_send_efb").classList.contains("d-none"))&&(document.getElementById("f_btn_send_efb").classList.remove("d-none"),document.getElementById("f_btn_send_efb").classList.add("d-block")),valj_efb[0].button_state=1==state?"multi":"single"},50)},add_buttons_zone_efb=(state,id)=>{var stng=`  <div class="efb col-sm-10 efb">
  <div class="efb  BtnSideEfb btn-edit-holder d-none efb" id="btnSetting-button_group">
      <button type="button" class="efb btn efb btn-edit efb btn-sm" id="settingElEFb"
          data-id="id1" data-bs-toggle="tooltip" title="${efb_var.text.edit}"
          onclick="show_setting_window_efb('button_group')">
          <div class="icon-container efb"><i class="efb   bi-gear-wide-connected text-success" id="efbSetting"></i></div>
      </button>
  </div>
  </div>`,floatEnd="dropZoneEFB"==id?"float-end":"",btnPos="dropZoneEFB"!=id?" text-center":"";let dis="";var t=valj_efb.findIndex(x=>"stripe"==x.type),t=(t=-1!=(t=-1==t?valj_efb.findIndex(x=>"persiaPay"==x.type):t)?valj_efb[t].step:0,dis="payment"==valj_efb[0].type&&1==valj_efb[0].steps&&1==t&&1!=preview_efb?"disabled":"",valj_efb[0].hasOwnProperty("corner")?valj_efb[0].corner:"efb-square"),btns_align=valj_efb[0].hasOwnProperty("btns_align")?valj_efb[0].btns_align+" mx-2":"justify-content-center",s=(console.log(btns_align),`
  <div class="efb d-flex ${btns_align} ${0==state?"d-block":"d-none"} ${btnPos} efb" id="f_btn_send_efb" data-tag="buttonNav">
    <a id="btn_send_efb" type="button" class="efb btn efb p-2 ${dis} ${valj_efb[0].button_color}  ${t} ${valj_efb[0].el_height}  efb-btn-lg ${floatEnd}"> ${3<valj_efb[0].icon.length&&"bi-undefined"!=valj_efb[0].icon&&"bXXX"!=valj_efb[0].icon?`<i class="efb   ${valj_efb[0].icon} mx-2  ${valj_efb[0].icon_color}   ${valj_efb[0].el_height}" id="button_group_icon"> </i>`:""}<span id="button_group_button_single_text" class="efb  ${valj_efb[0].el_text_color} ">${valj_efb[0].button_single_text}</span></a>
  </div>`),btns_align=`
  <div class="efb d-flex ${btns_align} ${1==state?"d-block":"d-none"} ${btnPos} ${1==efb_var.rtl?"flex-row-reverse":""} efb" id="f_button_form_np">
  <a id="prev_efb" type="button" class="efb btn efb p-2  ${valj_efb[0].button_color}    ${t}   ${valj_efb[0].el_height}   efb-btn-lg ${floatEnd} m-1">${2<valj_efb[0].button_Previous_icon.length?`<i class="efb  ${valj_efb[0].button_Previous_icon} ${valj_efb[0].icon_color} ${valj_efb[0].el_height}" id="button_group_Previous_icon"></i>`:""} <span id="button_group_Previous_button_text" class="efb  ${valj_efb[0].el_text_color} ${"bi-undefined"!=valj_efb[0].button_Previous_icon?"mx-2":""}">${valj_efb[0].button_Previous_text}</span></a>
  <a id="next_efb" type="button" class="efb btn efb ${dis} p-2 ${valj_efb[0].button_color}    ${t}  ${valj_efb[0].el_height}    efb-btn-lg ${floatEnd} m-1"><span id="button_group_Next_button_text" class="efb  ${valj_efb[0].el_text_color} ${"bi-undefined"!=valj_efb[0].button_Next_text?" mx-2":""}">${valj_efb[0].button_Next_text}</span> ${3<valj_efb[0].button_Next_icon.length?` <i class="efb  ${valj_efb[0].button_Next_icon} ${valj_efb[0].icon_color}  ${valj_efb[0].el_height}" id="button_group_Next_icon"></i>`:""}</a>
  </div>
  `;let c='<div class="efb footer-test efb">';if("dropZoneEFB"!=id?c+=0==state?s+"</div>":btns_align+"</div> \x3c!-- end btn --\x3e":c=` <div class="efb col-12 mb-5 pb-5 mt-3 mx-4 bottom-0 ${1!=valj_efb[0].captcha?"d-none":""} " id="recaptcha_efb"><img src="${efb_var.images.recaptcha}" id="img_recaptcha_perview_efb"></div>  <div class="efb bottom-0 " id="button_group_efb"> <div class="efb  row  showBtns efb" id="button_group" data-id="button_group" data-tag="buttonNav">${s} ${btns_align} ${stng} </div></div>`,"preview"==id||"body_efb"==id||document.getElementById("button_group"))return c;document.getElementById(id).innerHTML+=c};const colorTextChangerEfb=(classes,color)=>classes.replace(/(text-primary|text-darkb|text-muted|text-secondary|text-pinkEfb|text-success|text-white|text-light|\btext-colorDEfb-+[\w\-]+|text-danger|text-warning|text-info|text-dark|text-labelEfb)/,""+color),alignChangerElEfb=(classes,value)=>classes.replace(/(justify-content-start|justify-content-end|justify-content-center)/,""+value),alignChangerEfb=(classes,value)=>classes.replace(/(txt-left|txt-right|txt-center)/,""+value),RemoveTextOColorEfb=classes=>classes.replace("text-",""),colorBorderChangerEfb=(classes,color)=>classes.replace(/\bborder+-+[\w\-]+/gi,""+color),cornerChangerEfb=(classes,value)=>classes.replace(/(efb-square|efb-rounded)/,""+value),colMdChangerEfb=(classes,value)=>classes.replace(/\bcol-md+-\d+/,""+value),PxChangerEfb=(classes,value)=>classes.replace(/\bpx+-\d+/,""+value),MxChangerEfb=(classes,value)=>classes.replace(/\bmx+-\d+/,""+value),btnChangerEfb=(classes,value)=>classes.replace(/\bbtn-outline-+\w+|\bbtn-+\w+/,""+value),open_whiteStudio_efb=state=>{let link="https://whitestudio.team/document/";if("fa_IR"!=efb_var.language)switch(state){case"mapErorr":link+="How-to-Install-and-Use-the-Location-Picker-(geolocation)-with-Easy-Form-Builder";break;case"pro":link="https://whitestudio.team/#price";break;case"publishForm":link="https://www.youtube.com/watch?v=XjBPQExEvPE";break;case"emptyStep":link+="how-to-create-your-first-form-with-easy-form-builder#empty-step-alert";break;case"notInput":link+="?notInputExists";break;case"pickupByUser":link="How-to-Install-and-Use-the-Location-Picker-(geolocation)-with-Easy-Form-Builder#how-to-add-a-location-picker-when-creating-form";break;case"paymentform":link="How-to-Create-a-Payment-Form-in-Easy-Form-Builder"}else switch(link="https://easyformbuilder.ir/%d8%af%d8%a7%da%a9%db%8c%d9%88%d9%85%d9%86%d8%aa/",state){case"mapErorr":link+="%da%86%da%af%d9%88%d9%86%d9%87-%d8%a7%d9%86%d8%aa%d8%ae%d8%a7%d8%a8%da%af%d8%b1-%d9%85%d9%88%d9%82%d8%b9%db%8c%d8%aa-%d9%85%da%a9%d8%a7%d9%86%db%8c-%d9%85%d9%88%d9%82%d8%b9%db%8c%d8%aa-%d8%ac%d8%ba/";break;case"pro":link="https://easyformbuilder.ir/#price";break;case"publishForm":case"notInput":link+="%da%86%da%af%d9%88%d9%86%d9%87-%d9%81%d8%b1%d9%85-%d8%aa%d9%88%d8%b3%d8%b7-%d9%81%d8%b1%d9%85-%d8%b3%d8%a7%d8%b2-%d8%a2%d8%b3%d8%a7%d9%86-%d8%af%d8%b1-%d9%88%d8%b1%d8%af%d9%be%d8%b1%d8%b3-%d8%a8%d8%b3/";break;case"emptyStep":link+="%DA%86%DA%AF%D9%88%D9%86%D9%87-%D9%81%D8%B1%D9%85-%D8%AA%D9%88%D8%B3%D8%B7-%D9%81%D8%B1%D9%85-%D8%B3%D8%A7%D8%B2-%D8%A2%D8%B3%D8%A7%D9%86-%D8%AF%D8%B1-%D9%88%D8%B1%D8%AF%D9%BE%D8%B1%D8%B3-%D8%A8%D8%B3/";break;case"pickupByUser":link+="%da%86%da%af%d9%88%d9%86%d9%87-%d8%a7%d9%86%d8%aa%d8%ae%d8%a7%d8%a8%da%af%d8%b1-%d9%85%d9%88%d9%82%d8%b9%db%8c%d8%aa-%d9%85%da%a9%d8%a7%d9%86%db%8c-%d9%85%d9%88%d9%82%d8%b9%db%8c%d8%aa-%d8%ac%d8%ba/";break;case"paymentform":link+="%da%86%da%af%d9%88%d9%86%d9%87-%d8%af%d8%b1%da%af%d8%a7%d9%87-%d9%be%d8%b1%d8%af%d8%a7%d8%ae%d8%aa-%d8%a7%db%8c%d8%b1%d8%a7%d9%86%db%8c-%d8%b1%d8%a7-%d8%a8%d9%87-%d9%81%d8%b1%d9%85-%d8%b3%d8%a7%d8%b2/"}window.open(link,"_blank")},loading_messge_efb=()=>` <div class="efb card-body text-center efb"><div class="efb lds-hourglass efb"></div><h3 class="efb fs-3">${efb_var.text.pleaseWaiting}</h3></div>`;function copyCodeEfb(id){id=document.getElementById(id);id.select(),id.setSelectionRange(0,99999),document.execCommand("copy"),alert_message_efb(efb_var.text.copiedClipboard,"",6)}function validExtensions_efb_fun(type,fileType){return type=type.toLowerCase(),(filetype_efb={image:"image/png, image/jpeg, image/jpg, image/gif",media:"audio/mpeg, audio/wav, audio/ogg, video/mp4, video/webm, video/x-matroska, video/avi, video/mpeg , video/mpg, audio/mpg",document:".xlsx,.xls,.doc,.docx,.ppt, pptx,.pptm,.txt,.pdf,.dotx,.rtf,.odt,.ods,.odp,application/pdf,  text/plain, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document, application/vnd.ms-excel, application/vnd.ms-powerpoint, application/vnd.openxmlformats-officedocument.presentationml.presentation, application/vnd.ms-powerpoint.presentation.macroEnabled.12, application/vnd.openxmlformats-officedocument.wordprocessingml.template,application/vnd.oasis.opendocument.spreadsheet, application/vnd.oasis.opendocument.presentation, application/vnd.oasis.opendocument.text",zip:".zip, application/zip, application/octet-stream, application/x-zip-compressed, multipart/x-zip",allformat:"image/png, image/jpeg, image/jpg, image/gif audio/mpeg, audio/wav, audio/ogg, video/mp4, video/webm, video/x-matroska, video/avi, video/mpeg , video/mpg, audio/mpg .xlsx,.xls,.doc,.docx,.ppt, pptx,.pptm,.txt,.pdf,.dotx,.rtf,.odt,.ods,.odp,application/pdf,  text/plain, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document, application/vnd.ms-excel, application/vnd.ms-powerpoint, application/vnd.openxmlformats-officedocument.presentationml.presentation, application/vnd.ms-powerpoint.presentation.macroEnabled.12, application/vnd.openxmlformats-officedocument.wordprocessingml.template,application/vnd.oasis.opendocument.spreadsheet, application/vnd.oasis.opendocument.presentation, application/vnd.oasis.opendocument.text .zip, application/zip, application/octet-stream, application/x-zip-compressed, multipart/x-zip, .heic, image/heic, video/mov, .mov, video/quicktime"})[type].includes(fileType)}var steps_len_efb;function handle_navbtn_efb(steps,device){var next_s_efb,state;steps_len_efb=Number(steps)+1,setProgressBar_efb(current_s_efb=1,steps_len_efb),1<steps?("payment"==valj_efb[0].type&&1!=preview_efb&&(state=-1==(state=valj_efb.findIndex(x=>"stripe"==x.type))?valj_efb.findIndex(x=>"persiaPay"==x.type):state,valj_efb[state].step==current_s_efb)&&document.getElementById("next_efb").classList.add("disabled"),1==current_s_efb&&document.getElementById("prev_efb").classList.toggle("d-none"),document.getElementById("next_efb").addEventListener("click",function(){var cp=current_s_efb+1;if(0==preview_efb&&0==fun_validation_efb())return!1;setTimeout(function(){var val,url=new URL(window.location),url=(history.pushState("EFBstep-"+cp,null,url),cp==steps_len_efb&&(document.getElementById("prev_efb").classList.add("d-none"),document.getElementById("next_efb").classList.add("d-none"),send_data_efb(),document.getElementById("efbform").scrollIntoView({behavior:"smooth",block:"center",inline:"center"})),document.querySelector('[data-step="step-'+current_s_efb+'-efb"]')),nxt=(url.classList.add("d-none"),next_s_efb=url.nextElementSibling,""+(current_s_efb+1));if(1!=Number(valj_efb[0].show_icon)&&document.querySelector('[data-step="icon-s-'+nxt+'-efb"]').classList.add("active"),document.querySelector('[data-step="step-'+nxt+'-efb"]').classList.toggle("d-none"),next_s_efb&&next_s_efb.classList.remove("d-none"),document.getElementById("gRecaptcha")&&document.getElementById("gRecaptcha").classList.add("d-none"),current_s_efb+=1,localStorage.setItem("step",current_s_efb),setProgressBar_efb(current_s_efb,steps_len_efb),current_s_efb<=steps&&(val=valj_efb.find(x=>x.step==nxt),1!=Number(valj_efb[0].show_icon)&&(document.getElementById("title_efb").className=val.label_text_color,document.getElementById("desc_efb").className=val.message_text_color,document.getElementById("title_efb").textContent=val.name,document.getElementById("desc_efb").textContent=val.message,document.getElementById("title_efb").classList.add("text-center","efb","mt-1"),document.getElementById("desc_efb").classList.add("text-center","efb","fs-7")),document.getElementById("prev_efb").classList.remove("d-none")),current_s_efb==steps_len_efb-1&&(sitekye_emsFormBuilder&&1<sitekye_emsFormBuilder.length&&1==valj_efb[0].captcha&&document.getElementById("next_efb").classList.toggle("disabled"),val=`<span id="button_group_Next_button_text" class="efb ${valj_efb[0].el_text_color} mx-2">${efb_var.text.send}</span><i class="efb ${valj_efb[0].el_height} ${valj_efb[0].button_Next_icon} ${valj_efb[0].icon_color}" id="button_group_Next_icon"></i>`,document.getElementById("next_efb").innerHTML=val),"payment"==valj_efb[0].type&&1!=preview_efb){let state=valj_efb.findIndex(x=>"stripe"==x.type);state=-1==state?valj_efb.findIndex(x=>"persiaPay"==x.type):state,valj_efb[state].step==current_s_efb&&1==!efb_var.hasOwnProperty("payId")&&document.getElementById("next_efb").classList.add("disabled")}document.getElementById("body_efb")&&document.getElementById("body_efb").scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},200)}),document.getElementById("prev_efb").addEventListener("click",function(){prev_btn_efb()})):document.getElementById("btn_send_efb").addEventListener("click",function(){if(0==preview_efb&&0==fun_validation_efb())return!1;setTimeout(function(){1!=Number(valj_efb[0].show_icon)&&document.querySelector('[data-step="icon-s-'+(current_s_efb+1)+'-efb"]').classList.add("active"),document.querySelector('[data-step="step-'+(current_s_efb+1)+'-efb"]').classList.toggle("d-none"),document.getElementById("btn_send_efb").classList.toggle("d-none");var current_s=document.querySelector('[data-step="step-'+current_s_efb+'-efb"]');next_s_efb=current_s.nextElementSibling,current_s.classList.add("d-none"),next_s_efb.classList.remove("d-none"),setProgressBar_efb(current_s_efb+=1,steps_len_efb),send_data_efb(),document.getElementById("body_efb")&&document.getElementById("body_efb").scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},200)}),document.querySelector(".submit")&&document.querySelector(".submit").addEventListener("click",function(){return!1})}function prev_btn_efb(){var state,cs=current_s_efb,cs=(2==cs?(val=`<span id="button_group_Next_button_text" class="efb ${valj_efb[0].el_text_color} mx-2">${valj_efb[0].button_Next_text}</span><i class="efb ${valj_efb[0].el_height} ${valj_efb[0].button_Next_icon} ${valj_efb[0].icon_color}" id="button_group_Next_icon"></i>`,document.getElementById("next_efb").innerHTML=val,document.getElementById("next_efb").classList.toggle("d-none")):cs==valj_efb[0].steps&&(val=`<span id="button_group_Next_button_text" class="efb ${valj_efb[0].el_text_color} mx-2">${valj_efb[0].button_Next_text}</span><i class="efb ${valj_efb[0].el_height} ${valj_efb[0].button_Next_icon} ${valj_efb[0].icon_color}" id="button_group_Next_icon"></i>`,document.getElementById("next_efb").innerHTML=val,1<sitekye_emsFormBuilder.length)&&(1==valj_efb[0].captcha||"1"==valj_efb[0].captcha)&&document.getElementById("next_efb").classList.remove("disabled"),document.querySelector('[data-step="step-'+current_s_efb+'-efb"]')),s=("payment"==valj_efb[0].type&&1!=preview_efb&&(state=-1==(state=valj_efb.findIndex(x=>"stripe"==x.type))?valj_efb.findIndex(x=>"persiaPay"==x.type):state,valj_efb[state].step==cs)&&document.getElementById("next_efb").classList.remove("disabled"),prev_s_efb=document.querySelector('[data-step="step-'+(current_s_efb-1)+'-efb"]'),""+(current_s_efb-1)),val=valj_efb.find(x=>x.step==s);1!=Number(valj_efb[0].show_icon)&&(document.querySelector('[data-step="icon-s-'+current_s_efb+'-efb"]').classList.remove("active"),document.querySelector('[data-step="step-'+current_s_efb+'-efb"]').classList.toggle("d-none"),document.getElementById("title_efb").className=val.label_text_color,document.getElementById("desc_efb").className=val.message_text_color,document.getElementById("title_efb").textContent=val.name,document.getElementById("desc_efb").textContent=val.message,document.getElementById("title_efb").classList.add("text-center","efb","mt-1"),document.getElementById("desc_efb").classList.add("text-center","efb","fs-7")),cs.classList.add("d-none"),prev_s_efb.classList.remove("d-none"),current_s_efb-=1,localStorage.setItem("step",current_s_efb),setProgressBar_efb(current_s_efb,steps_len_efb),1==current_s_efb&&(document.getElementById("prev_efb").classList.toggle("d-none"),document.getElementById("next_efb").classList.toggle("d-none")),1==Number(valj_efb[0].captcha)&&current_s_efb<steps_len_efb&&document.getElementById("next_efb").classList.remove("disabled"),document.getElementById("body_efb")&&document.getElementById("body_efb").scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}function setProgressBar_efb(curStep,steps_len_efb){1!=Number(valj_efb[0].show_pro_bar)&&(curStep=curStep/steps_len_efb*100,curStep=Math.round(100*curStep)/100,document.querySelector(".progress-bar-efb").style.width=curStep+"%")}function ReadyElForViewEfb(content){setTimeout(()=>{var t=1==valj_efb[0].steps?0:1,t=add_buttons_zone_efb(t,"preview"),t=`
    <head>
    <script>
    valj_efb = ${JSON.stringify(valj_efb)};
    </script>   
  </head>
    <body>
    ${content}
    ${t}
    handle_navbtn_efb(${valj_efb[0].steps},'mobile')
    </script>
    </body>
    `,iframe=document.createElement("iframe");iframe.id="efbMobileView",iframe.src="data:text/html;charset=utf-8,"+encodeURI(t),document.getElementById("parentMobileView-efb").innerHTML="",document.getElementById("parentMobileView-efb").appendChild(iframe)},1e3)}function alert_message_efb(title,message,sec,alert){sec*=1e3,alert=alert?"alert-"+alert:"alert-info";var id_=document.getElementById(`step-${current_s_efb}-efb-msg`)?`step-${current_s_efb}-efb-msg`:"body_efb";let id=document.getElementById("body_efb")?id_:"alert_efb";"body_efb"==id&&Number(document.getElementById("body_efb").offsetWidth)<380&&(id="alert_content_efb"),null==document.getElementById("alert_efb")&&(document.getElementById("body_efb").innerHTML+="<div id='alert_efb' class='efb mx-5'></div>"),document.getElementById(id).innerHTML+=` <div id="alert_content_efb" class="efb alert_efb  alert ${alert} alert-dismissible ${1==efb_var.text.rtl?"rtl-text":""}" role="alert">
    <h5 class="efb alert-heading fs-4">${title}</h5>
    <div>${String(message)}</div>
    <button type="button" class="efb btn-close" data-dismiss="alert" aria-label="Close" onclick="close_msg_efb()"></button>
  </div>`,document.getElementById(id).scrollIntoView({behavior:"smooth",block:"center",inline:"center"},!0),setTimeout(()=>{document.querySelector(".alert_efb")&&(document.querySelector(".alert_efb").style.display="none",document.getElementById("alert_efb").innerHTML="")},sec)}function close_msg_efb(){var v=document.getElementById("alert_content_efb");v&&v.remove()}function noti_message_efb(message,alert,id){alert=alert?"alert-"+alert:"alert-info";id=document.getElementById(id);document.getElementById("noti_content_efb")&&document.getElementById("noti_content_efb").remove(),id.innerHTML+=` <div id="noti_content_efb" class="efb w-75 mt-0 my-1 alert-dismissible alert ${alert}  ${1==efb_var.rtl?"rtl-text":""}" role="alert">
    <p class="efb my-0">${message}</p>    
  </div>`}function previewFormEfb(state){"run"!=state&&(state_efb="view",preview_efb=!0,activeEl_efb=0);let content="\x3c!--efb.app--\x3e",step_no=0,head="";var id="run"==state?"body_efb":"settingModalEfb_";const len=valj_efb.length;var p=calPLenEfb(len);let timeout="run"==state?0:len*p;if(timeout<1700&&(timeout=1700),timeout="run"==state?0:timeout,"show"!=state&&"run"!=state){if(!(2<valj_efb.length))return show_modal_efb(`<div class="efb text-center text-darkb efb"><div class="efb bi-emoji-frown fs-4 efb"></div><p class="efb fs-5 efb">${efb_var.text.formNotFound}</p></div>`,efb_var.text.previewForm,"","saveBox"),void state_modal_show_efb(1);localStorage.setItem("valj_efb",JSON.stringify(valj_efb)),"pc"==state&&(show_modal_efb(loading_messge_efb(),efb_var.text.previewForm,"","saveBox"),state_modal_show_efb(1))}try{let count=0;valj_efb.forEach((value,index)=>{let t=value.type.toLowerCase();if("html"!=valj_efb[index].type&&"link"!=valj_efb[index].type&&"heading"!=valj_efb[index].type&&"persiaPay"!=valj_efb[index].type&&Object.entries(valj_efb[index]).forEach(([key,val])=>{fun_addStyle_costumize_efb(val.toString(),key,index)}),step_no<value.step&&"step"==value.type&&(step_no+=1,head+=`<li id="${value.id_}" data-step="icon-s-${step_no}-efb"class="efb  ${valj_efb[0].steps<=6?"step-w-"+valj_efb[0].steps:"step-w-6"} ${value.icon_color} ${value.icon}   ${1==value.step?"active":""}" ><strong class="efb  fs-5  ${value.label_text_color} ">${value.name}</strong></li>`,content+=1==step_no?`<fieldset data-step="step-${step_no}-efb" class="efb my-2 mx-0 px-0 steps-efb efb row">`:`<!-- fieldset!!!? --><div id="step-${Number(step_no)-1}-efb-msg"></div></fieldset><fieldset data-step="step-${step_no}-efb"  class="efb my-2 steps-efb efb row d-none">`,valj_efb[0].show_icon,valj_efb[0].hasOwnProperty("dShowBg"))&&1==valj_efb[0].dShowBg&&"run"==state&&document.getElementById("body_efb").classList.remove("card"),console.log(index,value),"step"==value.type&&"html"!=value.type?steps_index_efb.push(index):"step"!=value.type&&"form"!=value.type&&"option"!=value.type&&0<index&&(content+=addNewElement(value.type,value.id_,!0,!0),"html"==value.type)&&(content+="\x3c!--testHTML--\x3e"),!(value.hasOwnProperty("disabled")&&1==value.disabled&&0==value.hasOwnProperty("hidden")||value.hasOwnProperty("disabled")&&1==value.disabled&&1==value.hasOwnProperty("hidden")&&0==value.hidden))if("email"==value.type||"text"==value.type||"password"==value.type||"tel"==value.type||"number"==value.type||"url"==value.type||"textarea"==value.type||"range"==value.type)"function"==typeof fun_sendBack_emsFormBuilder&&1<value.value.length&&fun_sendBack_emsFormBuilder({id_:value.id_,name:value.name,id_ob:value.id_+"_",amount:value.amount,type:value.type,value:value.value,session:sessionPub_emsFormBuilder});else if("function"==typeof fun_sendBack_emsFormBuilder&&value.hasOwnProperty("value")&&0<value.value.length&&"option"!=value.type){let o=[];if(1==t.includes("radio")){count+=1;var ch=valj_efb.find(x=>x.id_==value.value||x.id_old==value.value);o=[{id_:value.id_,name:value.name,id_ob:ch.id_,amount:value.amount,type:value.type,value:ch.value,session:sessionPub_emsFormBuilder}],t.includes("pay")&&Object.assign(o.at(-1),{price:ch.price}),t=1}else if(1==t.includes("checkbox")){count+=1;for(let c of value.value){let ch=valj_efb.find(x=>x.id_==c);o.push({id_:value.id_,name:value.name,id_ob:ch.id_,amount:value.amount,type:value.type,value:ch.value,session:sessionPub_emsFormBuilder}),t.includes("pay")&&Object.assign(o.at(-1),{price:ch.price})}t=1}else if(1==t.includes("multi")){count+=1;let val="";for(let c of value.value){let ch=valj_efb.find(x=>x.id_==c);val+=ch.value+"@efb!"}o=[{id_:value.id_,name:value.name,amount:value.amount,type:value.type,value:val,session:sessionPub_emsFormBuilder}],t=1}else if(1==t.includes("select")||1==t.includes("stateprovince")||1==t.includes("conturylist")){count+=1;let ch=valj_efb.find(x=>x.id_==value.value);o=[{id_:value.id_,name:value.name,id_ob:ch.id_,amount:value.amount,type:value.type,value:ch.value,session:sessionPub_emsFormBuilder}],t=1}if(1===t)for(var i in o)fun_sendBack_emsFormBuilder(o[i])}}),step_no+=1,content+=`
           ${0==valj_efb[0].hasOwnProperty("logic")||1==valj_efb[0].hasOwnProperty("logic")&&0==valj_efb[0].logic?fun_captcha_load_efb():"\x3c!--logic efb--!>"}
           </fieldset>
          <fieldset data-step="step-${step_no}-efb" class="efb my-5 pb-5 steps-efb efb row d-none text-center" id="efb-final-step">
            ${(1==valj_efb[0].hasOwnProperty("logic")&&1==valj_efb[0].logic?fun_captcha_load_efb:loading_messge_efb)()}                
            <!-- fieldset2 -->
            <div id="step-2-efb-msg"></div>
            </fieldset>`,head+=`<li id="f-step-efb"  data-step="icon-s-${step_no}-efb" class="efb  ${valj_efb[1].icon_color} ${valj_efb[0].steps<=6?"step-w-"+valj_efb[0].steps:"step-w-6"} bi-check-lg" ><strong class="efb  fs-5 ${valj_efb[1].label_text_color}">${efb_var.text.finish}</strong></li>`}catch(error){console.error("Preview of Pc Form has an Error",error)}10<content.length&&(p=valj_efb[0].hasOwnProperty("prg_bar_color")?valj_efb[0].prg_bar_color:"btn-primary",content+="</div>",head=`${1!=Number(valj_efb[0].show_icon)?`<ul id="steps-efb" class="efb mb-2 px-2">${head}</ul>`:""}
    ${0==valj_efb[0].show_pro_bar||0==valj_efb[0].show_pro_bar?`<div class="efb d-flex justify-content-center" id="f-progress-efb"><div class="efb progress mx-3 w-100 ${p}"><div class="efb  progress-bar-efb   progress-bar-striped progress-bar-animated" role="progressbar"aria-valuemin="0" aria-valuemax="100"></div></div></div><br> `:""}
    `);var frame,p="pre"==state?"pre-form-efb":"pre-efb",p=(document.getElementById(id).classList.add(p),content=`  
    <div class="efb px-0 pt-2 pb-0 my-1 col-12 mb-2" id="view-efb">

    ${1!=Number(valj_efb[0].show_icon)?`<h4 id="title_efb" class="efb fs-3 ${valj_efb[1].label_text_color} text-center mt-3 mb-0">${valj_efb[1].name}</h4><p id="desc_efb" class="efb ${valj_efb[1].message_text_color} text-center  fs-6 mb-2">${valj_efb[1].message}</p>`:""}
    
     <form id="efbform"> ${head} <div class="efb mt-1 px-2">${content}</div> </form>
    </div>
    `,1==valj_efb[0].steps?0:1);"pc"==state?(document.getElementById("dropZoneEFB").innerHTML="",content="\x3c!-- find xxxx --\x3e"+content,show_modal_efb(content,efb_var.text.pcPreview,"bi-display","saveBox"),add_buttons_zone_efb(p,"settingModalEfb-body")):"pre"==state?(show_modal_efb(content,efb_var.text.pcPreview,"bi-display","saveBox"),add_buttons_zone_efb(p,"settingModalEfb-body")):"mobile"==state?(frame=`
        <div class="efb smartphone-efb">
        <div class="efb content efb" >
            <div id="parentMobileView-efb">
            <div class="efb lds-hourglass efb"></div><h3 class="efb ">${efb_var.text.pleaseWaiting}</h3>
            </div>
         
        </div>
        
      </div> `,show_modal_efb(frame,efb_var.text.mobilePreview,"bi-phone","settingBox"),ReadyElForViewEfb(content)):(document.getElementById(id).innerHTML=content,document.getElementById(id).innerHTML+=add_buttons_zone_efb(p,id),"payment"==valj_efb[0].type&&"stripe"==ajax_object_efm.paymentGateway&&"function"==typeof post_api_stripe_apay_efb&&post_api_stripe_apay_efb());let ttype="text";try{const len=valj_efb.length;valj_efb.forEach((v,i)=>{var disabled=!!v.hasOwnProperty("disabled")&&v.disabled;switch(v.type){case"maps":initMap(disabled);break;case"esign":(c2d_contex_efb=document.getElementById(v.id_+"_").getContext("2d")).lineWidth=5,c2d_contex_efb.strokeStyle="#000000",disabled||(document.getElementById(v.id_+"_").addEventListener("mousedown",e=>{draw_mouse_efb=!0,c2d_contex_efb=document.getElementById(v.id_+"_").getContext("2d"),canvas_id_efb=v.id_,lastMousePostion_efb=getmousePostion_efb(document.getElementById(v.id_+"_"),e)},!1),document.getElementById(v.id_+"_").addEventListener("mouseup",e=>{draw_mouse_efb=!1;var value=document.getElementById(v.id_+"-sig-data").value,value=(document.getElementById(v.id_+"_-message").classList.remove("show"),[{id_:v.id_,name:v.name,amount:v.amount,type:v.type,value:value,session:sessionPub_emsFormBuilder}]);fun_sendBack_emsFormBuilder(value[0])},!1),document.getElementById(v.id_+"_").addEventListener("mousemove",e=>{mousePostion_efb=getmousePostion_efb(document.getElementById(v.id_+"_"),e)},!1),document.getElementById(v.id_+"_").addEventListener("touchmove",e=>{e=e.touches[0],e=new MouseEvent("mousemove",{clientY:e.clientY,clientX:e.clientX});document.getElementById(v.id_+"_").dispatchEvent(e)},!1),document.getElementById(v.id_+"_").addEventListener("touchstart",e=>{canvas_id_efb=v.id_,c2d_contex_efb=document.getElementById(v.id_+"_").getContext("2d"),mousePostion_efb=getTouchPos_efb(document.getElementById(v.id_+"_"),e);e=e.touches[0],e=new MouseEvent("mousedown",{clientY:e.clientY,clientX:e.clientX});document.getElementById(v.id_+"_").dispatchEvent(e)},!1),document.getElementById(v.id_+"_").addEventListener("touchend",e=>{var ms=new MouseEvent("mouseup",{});document.getElementById(v.id_+"_").dispatchEvent(ms),document.getElementById(v.id_+"-sig-data").value},!1),function drawLoop(){requestAnimFrame(drawLoop),renderCanvas_efb(v.id_)}());break;case"multiselect":case"payMultiselect":let callback=1;!function mutlselect(len){setTimeout(()=>{callback+=1;var corner,opd=document.querySelector(`[data-id='${v.id_}_options']`);null!=opd?(corner=v.hasOwnProperty("corner")?v.corner:"efb-square",opd.className+=` efb emsFormBuilder_v  ${corner} ${v.el_border_color} ${v.el_text_size} `+v.el_height,opd.onclick=function(){},jQuery(function(){jQuery(".selectpicker").selectpicker()})):mutlselect(10*callback)},len)}(len);break;case"rating":break;case"dadfile":disabled||set_dadfile_fun_efb(v.id_,i);break;case"ardate":case"pdate":ttype=v.type}})}catch{console.error("Preview of Pc Form has an Error")}"mobile"!=state&&(valj_efb[0].hasOwnProperty("logic")&&1==valj_efb[0].logic?logic_handle_navbtn_efb:handle_navbtn_efb)(valj_efb[0].steps,"pc"),"run"==state&&(1<sitekye_emsFormBuilder.length&&loadCaptcha_efb(),createStepsOfPublic()),step_el_efb=Number(valj_efb[0].steps),("run"==state&&1==addons_emsFormBuilder.AdnOF&&"string"==typeof valj_efb[0].AfLnFrm&&1==valj_efb[0].AfLnFrm||"persiaPay"==valj_efb[0].getway&&"string"==typeof get_authority_efb)&&fun_offline_Efb(),"ardate"==ttype?"function"==typeof load_hijir_data_picker_efb?load_hijir_data_picker_efb():setTimeout(()=>{alert_message_efb(efb_var.text.iaddon,efb_var.text.IMAddonAD,20,"info")},1e3):"pdate"==ttype&&("function"==typeof load_style_persian_data_picker_efb?load_style_persian_data_picker_efb():setTimeout(()=>{alert_message_efb(efb_var.text.iaddon,efb_var.text.IMAddonPD,20,"info")},1e3))}function fun_prev_send(){var stp=Number(valj_efb[0].steps)+1,wtn=loading_messge_efb(),wtn=(document.getElementById("efb-final-step").innerHTML=wtn,document.querySelector('[data-step="step-'+current_s_efb+'-efb"]')),s=(prev_s_efb=document.querySelector('[data-step="step-'+(current_s_efb-1)+'-efb"]'),1!=Number(valj_efb[0].show_icon)&&document.querySelector('[data-step="icon-s-'+current_s_efb+'-efb"]').classList.remove("active"),document.querySelector('[data-step="step-'+current_s_efb+'-efb"]').classList.toggle("d-none"),2==stp?(document.getElementById("btn_send_efb").classList.toggle("d-none"),document.getElementById("gRecaptcha")&&document.getElementById("gRecaptcha").classList.toggle("d-none")):document.getElementById("next_efb").classList.toggle("d-none"),""+(current_s_efb-1)),val=valj_efb.find(x=>x.step==s);1!=Number(valj_efb[0].show_icon)&&(document.getElementById("title_efb").className=val.label_text_color+" efb text-center mt-1",document.getElementById("desc_efb").className=val.message_text_color+" efb text-center fs-6",document.getElementById("title_efb").textContent=val.name,document.getElementById("desc_efb").textContent=val.message),document.getElementById("prev_efb")&&document.getElementById("prev_efb").classList.toggle("d-none"),wtn.classList.add("d-none"),prev_s_efb.classList.remove("d-none"),--current_s_efb,localStorage.setItem("step",current_s_efb),setProgressBar_efb(current_s_efb,stp)}function verifyCaptcha(token){1<token.length&&(token=1<valj_efb[0].steps?"next_efb":"btn_send_efb",document.getElementById(token).classList.remove("disabled"),setTimeout(()=>{timeOutCaptcha()},61e3))}function timeOutCaptcha(){var id=1<valj_efb[0].steps?"next_efb":"btn_send_efb";document.getElementById(id).classList.add("disabled"),alert_message_efb(ajax_object_efm.text.error,ajax_object_efm.text.errorVerifyingRecaptcha,7,"warning")}function fun_validation_efb(){var offsetw=document.getElementById("body_efb").offsetWidth,msg=Number(offsetw)<380&&0==window.matchMedia("(max-width: 480px)").matches?`<div class="efb fs-5 nmsgefb bi-exclamation-diamond-fill" onClick="alert_message_efb('${efb_var.text.enterTheValueThisField}','',10,'danger')"></div>`:efb_var.text.enterTheValueThisField;let state=!0,idi="null";for(let row in valj_efb){let s=sendBack_emsFormBuilder_pub.findIndex(x=>x.id_==valj_efb[row].id_);if(1<row&&1==valj_efb[row].required&&current_s_efb==valj_efb[row].step&&"chlCheckBox"!=valj_efb[row].type){var id=0==fun_el_select_in_efb(valj_efb[row].type)?valj_efb[row].id_+"_":valj_efb[row].id_+"_options",el=document.getElementById(valj_efb[row].id_+"_-message");if("file"!=valj_efb[row].type&&"dadfile"!=valj_efb[row].type||(r=files_emsFormBuilder.findIndex(x=>x.id_==valj_efb[row].id_),s=files_emsFormBuilder[r].hasOwnProperty("state")&&0==Number(files_emsFormBuilder[r].state)||-1==r?-1:1),-1==s){1==state&&(state=!1,idi=valj_efb[row].id_);const id=0==fun_el_select_in_efb(valj_efb[row].type)?valj_efb[row].id_+"_":valj_efb[row].id_+"_options";Number(offsetw)<525&&0==window.matchMedia("(max-width: 480px)").matches&&el.classList.add("unpx"),el.innerHTML=msg,el.classList.contains("show")||el.classList.add("show"),1==type_validate_efb(valj_efb[row].type)&&(document.getElementById(id).className=colorBorderChangerEfb(document.getElementById(id).className,"border-danger"))}else{idi=valj_efb[row].id_,el.innerHTML="",el.classList.remove("show"),1==type_validate_efb(valj_efb[row].type)&&(document.getElementById(id).className=colorBorderChangerEfb(document.getElementById(id).className,"border-success"));var r=0<sendBack_emsFormBuilder_pub.length&&"multiselect"==valj_efb[row].type&&sendBack_emsFormBuilder_pub[s].hasOwnProperty("value")?sendBack_emsFormBuilder_pub[s].value.split("@efb!"):"";("multiselect"==valj_efb[row].type||"payMultiselect"==valj_efb[row].type)&&r.length-1<valj_efb[row].minSelect&&(document.getElementById(id).className=colorBorderChangerEfb(document.getElementById(id).className,"border-danger"),el.innerHTML=efb_var.text.minSelect+" "+valj_efb[row].minSelect,el.classList.contains("show")||el.classList.add("show"),1==state)&&(state=!1,idi=valj_efb[row].id_)}}else if(1<row&&"chlCheckBox"==valj_efb[row].type&&current_s_efb==valj_efb[row].step){for(var em of sendBack_emsFormBuilder_pub)"chlCheckBox"==em.type&&em.id_==valj_efb[row].id_&&""==em.qty.length&&(em=em.id_ob+"_chl",document.getElementById(em).classList.add("bg-danger"),state=!1,idi=valj_efb[row].id_);0==state&&noti_message_efb(efb_var.text.enterTheValueThisField,"danger",`step-${current_s_efb}-efb-msg`)}}return"null"!=idi&&document.getElementById(idi).scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),state}function type_validate_efb(type){return"select"==type||"multiselect"==type||"text"==type||"password"==type||"email"==type||"conturyList"==type||"stateProvince"==type||"file"==type||"url"==type||"color"==type||"date"==type||"textarea"==type||"tel"==type||"number"==type}function send_data_efb(){var cp;"run"!=state_efb?(cp=funTnxEfb("DemoCode-220201"),document.getElementById("efb-final-step").innerHTML=cp):endMessage_emsFormBuilder_view()}function funTnxEfb(val,title,message){var done=valj_efb[0].thank_you_message.done||efb_var.text.done,corner=valj_efb[0].hasOwnProperty("corner")?valj_efb[0].corner:"efb-square",thankYou=valj_efb[0].thank_you_message.thankYou||efb_var.text.thanksFillingOutform,title=title||done,done=message||thankYou,message=valj_efb[0].hasOwnProperty("clrdoneMessageEfb")?valj_efb[0].clrdoneMessageEfb:"doneMessageEfb",thankYou=valj_efb[0].hasOwnProperty("clrdoneTitleEfb")?valj_efb[0].clrdoneTitleEfb:"doneTitleEfb",clr_doniconEfb=valj_efb[0].hasOwnProperty("clrdoniconEfb")?valj_efb[0].clrdoniconEfb:"doneTitleEfb",val=`
  <div class="efb fs-4"><h5 class="efb mt-3 efb fs-4 ${message}" id="doneTrackEfb">${valj_efb[0].thank_you_message.trackingCode||efb_var.text.trackingCode}: <strong>${val}</strong></h5>
               <input type="text" class="efb hide-input efb " value="${val}" id="trackingCodeEfb">
               <div id="alert"></div>
               <button type="button" class="efb btn  ${corner} efb ${valj_efb[0].button_color}  ${valj_efb[0].el_text_color} efb-btn-lg my-3 fs-5" onclick="copyCodeEfb('trackingCodeEfb')">
                   <i class="efb fs-5 bi-clipboard-check mx-1  ${valj_efb[0].el_text_color}"></i>${efb_var.text.copy}
               </button></div>`;return`
                    <h4 class="efb  my-1 fs-2 ${thankYou}" id="doneTitleEfb">
                        <i class="efb ${valj_efb[0].thank_you_message.hasOwnProperty("icon")?valj_efb[0].thank_you_message.icon:"bi-hand-thumbs-up"}  title-icon mx-2 fs-2 ${clr_doniconEfb}" id="DoneIconEfb"></i>${title}
                    </h4>
                    <h3 class="efb fs-4 ${message}" id="doneMessageEfb">${done}</h3>
                  <span class="efb " ${1==valj_efb[0].trackingCode?val:"</br>"}</span>
  
  `}localStorage.getItem("count_view")?localStorage.setItem("count_view",parseInt(localStorage.getItem("count_view"))+1):localStorage.setItem("count_view",0),fun_el_select_in_efb=el=>"conturyList"==el||"stateProvince"==el||"select"==el||"multiselect"==el||"paySelect"==el||"payMultiselect"==el,fun_el_check_radio_in_efb=el=>"radio"==el||"checkbox"==el||"payRadio"==el||"payCheckbox"==el||"imgRadio"==el||"chlRadio"==el||"chlCheckBox"==el,addStyleColorBodyEfb=(t,c,type,id)=>{console.log("addStyleColorBodyEfb",t,c,type,id);let ttype="text";var v=`.${t}{color:${c}!important;}`;let tag="";switch(ttype=-1==id?type:valj_efb[id].type){case"textarea":tag="textarea";break;case"text":case"password":case"email":case"number":case"image":case"date":case"tel":case"url":case"range":case"color":case"checkbox":case"radiobutton":tag="input";break;case"btn":tag="btn";break;default:tag=""}c="#"!=c[0]?"#"+c:c,efb_add_costum_color(t,c,v,type)},efb_add_costum_color=(t,c,v,type)=>{console.log("===>efb_add_costum_color",t,c,v,type);let n="";return c="#"!=c[0]?"#"+c:c,"text"==type?v=`.${n=type+"-"+t}{color:${c}!important;}`:"icon"==type?v=`.${n="text-"+t}{color:${c}!important;}`:"border"==type?v=`.${n=type+"-"+t}{border-color:${c}!important;}`:"bg"!=type&&"btn"!=type||(v=`.${n=type+"-"+t}{background-color:${c}!important;}`),document.body.appendChild(Object.assign(document.createElement("style"),{textContent:""+v})),n},fun_addStyle_costumize_efb=(val,key,indexVJ)=>{if(console.log("fun_addStyle_costumize_efb",val,key,indexVJ),val.toString().includes("colorDEfb")){let type="",color="";switch(key.toString()){case"button_color":type="btn",color=valj_efb[indexVJ].style_btn_color||"";break;case"icon_color":type="icon",color=valj_efb[indexVJ].style_icon_color||"";break;case"el_text_color":type="text",color=valj_efb[indexVJ].style_el_text_color||"";break;case"label_text_color":type="text",color=valj_efb[indexVJ].style_label_color||"";break;case"message_text_color":type="text",color=valj_efb[indexVJ].style_message_text_color||"";break;case"el_border_color":type="border",color=valj_efb[indexVJ].style_border_color||"";break;case"clrdoneTitleEfb":type="text",color=valj_efb[indexVJ].clrdoneTitleEfb?valj_efb[indexVJ].clrdoneTitleEfb.slice(-7):"";break;case"clrdoniconEfb":type="text",color=valj_efb[indexVJ].clrdoniconEfb?valj_efb[indexVJ].clrdoniconEfb.slice(-7):"";break;case"clrdoneMessageEfb":type="text",color=valj_efb[indexVJ].clrdoneMessageEfb?valj_efb[indexVJ].clrdoneMessageEfb.slice(-7):"";break;case"prg_bar_color":type="btn",color=valj_efb[0].prg_bar_color?valj_efb[indexVJ].prg_bar_color.slice(-7):"",indexVJ=-1}""!=color&&addStyleColorBodyEfb("colorDEfb-"+color.slice(1),6<color.length?color.slice(-6):color,type,indexVJ)}},fun_offline_Efb=()=>{let el="";if(0!=localStorage.hasOwnProperty("sendback")){var value;for(value of JSON.parse(localStorage.getItem("sendback")))switch(sendBack_emsFormBuilder_pub.push(value),value.type){case"email":case"text":case"password":case"tel":case"url":case"date":case"color":case"range":case"number":case"firstName":case"lastName":document.getElementById(value.id_ob).value=value.value;break;case"textarea":document.getElementById(value.id_ob).innerHTML=value.value;break;case"checkbox":case"radio":case"payCheckbox":case"payRadio":case"payRadio":document.getElementById(value.id_ob).checked=!0;break;case"paySelect":case"conturyList":case"stateProvince":case"select":document.getElementById(value.id_ob).value=value.value;break;case"multiselect":case"payMultiselect":var v,op=document.getElementById(value.id_+"_options"),vs=(op.innerHTML=value.value.replaceAll("@efb!",","),value.value.split("@efb!"));for(v of vs)(el=document.querySelector(`.efblist  [data-name="${v}"]`))&&(el.className+=" border-info",el.innerHTML=`
                <th scope="row" class="bi-check-square text-info efb"></th>
                <td class="efb  ms">${v}</td>
                `,op.dataset.select=el.dataset.row+" @efb!");break;case"esign":let ctx=(el=document.getElementById(value.id_+"_")).getContext("2d"),image=new Image;image.onload=function(){ctx.drawImage(image,0,0)},image.src=value.value;break;case"yesNo":for(let op of el=document.querySelectorAll(`[data-lid='${value.id_}']`))op.dataset.value==value.value&&(op.className+="active");break;case"switch":document.getElementById(value.id_ob).checked="On"==value.value;break;case"rating":1<=value.value&&(document.getElementById(value.id_+"-star1").checked=!0),2<=value.value&&(document.getElementById(value.id_+"-star2").checked=!0),3<=value.value&&(document.getElementById(value.id_+"-star3").checked=!0),4<=value.value&&(document.getElementById(value.id_+"-star4").checked=!0),5==value.value&&(document.getElementById(value.id_+"-star5").checked=!0);break;case"document":let s=value.url.split("/");s=s.pop(),(el=document.getElementById(value.id_+"_-message")).className="efb text-success efb fs-7 fw-bolder",el.innerHTML=efb_var.text.uploadedFile+": "+s,el.classList.contains("show")||el.classList.add("show")}"payment"==valj_efb[0].type&&"persiaPay"==valj_efb[0].getway&&"string"==typeof get_authority_efb&&fun_after_bankpay_persia_ui()}};let get_position_col_el=(dataId,state)=>{var indx=valj_efb.findIndex(x=>x.dataId==dataId),el_parent=document.getElementById(valj_efb[indx].id_)??"null",el_label=document.getElementById(valj_efb[indx].id_+"_labG")??"null",el_input=document.getElementById(valj_efb[indx].id_+"-f")??"null";let parent_col="",label_col="col-md-12",input_col="col-md-12",parent_row="";switch(valj_efb[indx].hasOwnProperty("size")?Number(valj_efb[indx].size):100){case 100:parent_col="col-md-12",label_col="col-md-3",input_col="col-md-9";break;case 92:parent_col="col-md-11",label_col="col-md-2",input_col="col-md-10";break;case 80:case 83:parent_col="col-md-10",label_col="col-md-2",input_col="col-md-10";break;case 75:parent_col="col-md-9",label_col="col-md-2",input_col="col-md-10";break;case 67:parent_col="col-md-8",label_col="col-md-3",input_col="col-md-9";break;case 58:parent_col="col-md-7",label_col="col-md-3",input_col="col-md-9";break;case 50:parent_col="col-md-6",label_col="col-md-3",input_col="col-md-9";break;case 42:parent_col="col-md-5",label_col="col-md-3",input_col="col-md-9";break;case 33:parent_col="col-md-4",label_col="col-md-4",input_col="col-md-8";break;case 25:parent_col="col-md-3",label_col="col-md-4",input_col="col-md-8";break;case 17:parent_col="col-md-2",label_col="col-md-4",input_col="col-md-8";break;case 8:parent_col="col-md-1",label_col="col-md-5",input_col="col-md-5"}return"up"==valj_efb[indx].label_position?(label_col="col-md-12",input_col="col-md-12"):parent_row="row",1==state&&(el_parent.classList=colMdChangerEfb(el_parent.className,parent_col),"null"!=el_input&&(el_input.classList=colMdChangerEfb(el_input.className,input_col)),"null"!=el_label)&&(el_label.classList=colMdChangerEfb(el_label.className,label_col)),[parent_row,parent_col,label_col,input_col]};function calPLenEfb(len){let p=2;return p=len<=5?40:5<len&&len<=10?20:10<len&&len<=50?15:50<len&&len<=100?9:100<len&&len<=300?3:300<len&&len<=600?1.5:600<len&&len<=1e3?1.2:1.1}function replaceContentMessageEfb(value){return value=(value=(value=(value=(value=(value=(value=value.replace(/[\\]/g,"")).replaceAll(/(\\"|"\\)/g,'"')).replaceAll(/(\\\\n|\\\\r)/g,"<br>")).replaceAll("@efb@sq#","'")).replaceAll("@efb@vq#","`")).replaceAll("@efb@dq#","''")).replaceAll("@efb@nq#","<br>")}function fun_upload_file_api_emsFormBuilder(id,type,tp){var indx,idn,file;if(navigator.onLine)return indx=files_emsFormBuilder.findIndex(x=>x.id_===id),files_emsFormBuilder[indx].state=1,files_emsFormBuilder[indx].type=type,type=efb_var.nonce_msg,"msg"==tp?efb_var.id:efb_var.msg_id,new FormData,idn=id+"_",(file=document.getElementById(idn)).files[0],uploadFile_api(file.files[0],id,tp,type,indx,idn),!0;alert_message_efb("",efb_var.text.offlineSend,17,"danger")}function uploadFile_api(file,id,pl,nonce_msg,indx,idn){document.querySelector("#progress-bar");const idB=id+"-prB";fetch_uploadFile(file,id,pl,nonce_msg).then(data=>{var ob;!0===data.success&&!0===data.data.success?(files_emsFormBuilder[indx].url=data.data.file.url,files_emsFormBuilder[indx].state=2,files_emsFormBuilder[indx].id=idn,ob=valueJson_ws.find(x=>x.id_===id)||0,ob=[{id_:files_emsFormBuilder[indx].id_,name:files_emsFormBuilder[indx].name,amount:ob.amount,type:files_emsFormBuilder[indx].type,value:"@file@",url:files_emsFormBuilder[indx].url,session:sessionPub_emsFormBuilder}],fun_sendBack_emsFormBuilder(ob[0]),(ob=document.getElementById(idB))&&(ob.style.width="100%",ob.textContent="100% = "+file.name),document.getElementById(id+"-prG")&&document.getElementById(id+"-prG").classList.add("d-none")):(alert_message_efb("",data.data.hasOwnProperty("file")?data.data.file.error:data.data.m,30,"danger"),document.querySelector(idB).style.width="0%",document.querySelector(idB).textContent="0% = "+file.name)}).catch(error=>{console.error(error)})}function fetch_uploadFile(file,id,pl,nonce_msg){var idB=id+"-prB";return new Promise((resolve,reject)=>{var formData=new FormData,fid=efb_var.hasOwnProperty("id")?efb_var.id:0,fid=(formData.append("async-upload",file),formData.append("id",id),formData.append("pl",pl),formData.append("nonce_msg",nonce_msg),formData.append("sid",efb_var.sid),formData.append("fid",fid),efb_var.rest_url+"Emsfb/v1/forms/file/upload");const xhr=new XMLHttpRequest;xhr.upload.addEventListener("progress",event=>{var el;event.lengthComputable&&(event=Math.round(event.loaded/event.total*100),el=document.getElementById(idB))&&(el.style.width=event+"%",el.textContent=event+"% = "+file.name)}),xhr.addEventListener("load",()=>{var response;200<=xhr.status&&xhr.status<300?(response=JSON.parse(xhr.responseText),resolve(response)):reject(xhr.statusText)}),xhr.addEventListener("error",()=>{reject(xhr.statusText)}),xhr.open("POST",fid,!0),xhr.send(formData)})}function generatePDF_EFB(id){var fonts_name=[{loc:"am",font:"Noto Serif Ethiopic"},{loc:"ar",font:"Noto Sans Arabic"},{loc:"fa_IR",font:"Noto Sans Arabic"},{loc:"arq",font:"Alegreya Sans SC"},{loc:"az_TR",font:"Noto Sans"},{loc:"bn_BD",font:"Noto Sans Bengali"},{loc:"cs_CZ",font:"Signika"},{loc:"hat",font:"Tinos"},{loc:"he_IL",font:"Noto Sans Hebrew"},{loc:"hr",font:"Noto Sans"},{loc:"hy",font:"Noto Sans Armenian"},{loc:"id_ID",font:"Noto Sans"},{loc:"ja",font:"Noto Sans JP"},{loc:"ka_GE",font:"Noto Sans Georgian"},{loc:"km",font:"Noto Sans Khmer"},{loc:"ko_KR",font:"Noto Sans KR"},{loc:"lt_LT",font:"Noto Sans"},{loc:"ml_IN",font:"Noto Sans"},{loc:"ms_MY",font:"Noto Sans"},{loc:"ne_NP",font:"Noto Sans"},{loc:"ru_RU",font:"Noto Sans"},{loc:"sw",font:"Noto Sans"},{loc:"th",font:"Noto Sans Thai"},{loc:"ur",font:"Noto Nastaliq Urdu"},{loc:"uz_UZ",font:"Noto Sans"},{loc:"vi",font:"Noto Sans"},{loc:"zh_CN",font:"Noto Sans SC"},{loc:"zh_HK",font:"Noto Sans HK"},{loc:"zh_TW",font:"Noto Sans TC"}],indx=fonts_name.findIndex(x=>x.loc==efb_var.wp_lan),fonts_name=-1!=indx?fonts_name[indx].font:"Noto Sans",indx=`
        <link href="https://fonts.googleapis.com/css2?family=${fonts_name}" rel="stylesheet">
        <style>
           html{ font-family: '${fonts_name}', sans-serif;}
            .bg-response.efb {
              padding: 10px 19px;
              margin: 15px 20px;
              border-radius: 15px !important;
              background-color: #fcfcfc !important;
              box-shadow: 0px 1px 0px 2px rgb(0 7 17) !important;
          }
          img{width: 200px;}
          img.emoji{ width: 40px;}
          p {margin: 0px;}

          #watermark {
            margin: 0% 24%;
            font-size: 28px;
            position: absolute;
            color: #a8bde085;
            transform: rotate(-45deg);
            align-items: center;
            align-items: center;
            text-align: center;
            font-weight: bold;
        }
        </style>
  `,fonts_name=document.getElementById(id);let n_win=window.open("","Print-Window");id=`<a href="${window.location.origin}" target="_blank">${window.location.hostname}</a></h2>
  `+(1!=efb_var.pro?`<h2>${efb_var.text.createdBy} <a href="https://whitestudio.team" target="_blank">${efb_var.text.easyFormBuilder}</a>`:"");val=`<html style="direction:${0==efb_var.rtl?"ltr":"rtl"}"><head>${indx}</head>
  <title>${window.location.hostname}</title>
  <body onload='winprint()'>
  <script>
  function winprint(){setTimeout(()=>{window.print()},100);}
  </script>
  ${` <div style="text-align:center">
  <h2>${id}</h2>
</div>`}

  ${fonts_name.innerHTML}
     
  </body></html>`,n_win.document.open(),n_win.document.write(val),setTimeout(()=>{n_win.document.close()},100)}function check_msg_ext_resp_efb(){document.querySelector("#replayM_emsFormBuilder").addEventListener("keypress",event=>{document.querySelector("#replayB_emsFormBuilder").classList.contains("disabled")&&document.querySelector("#replayB_emsFormBuilder").classList.remove("disabled"),13===event.which&&event.preventDefault()})}function fun_show_val_range_efb(id){document.getElementById(id+"_rv").innerText=document.getElementById(id+"_").value}santize_string_efb=str=>{return str.replaceAll(/(<)(script[^>]*>[^<]*(?:<(?!\/script>)[^<]*)*<\/script>|\/?\b[^<>]+>|!(?:--\s*(?:(?:\[if\s*!IE]>\s*-->)?[^-]*(?:-(?!->)-*[^-]*)*)--|\[CDATA[^\]]*(?:](?!]>)[^\]]*)*]])>)/g,"do not use HTML tags")},state_rply_btn_efb=t=>{0!=pro_efb&&setTimeout(()=>{if(1==stock_state_efb){var d=document.getElementById("respStateEfb");d&&(d.disabled=!1,d.classList.remove("btn-outline-pink"),d.classList.contains("btn-outline-pink")||d.classList.remove("btn-outline-pink"),d.classList.contains("btn-outline-success")||d.classList.add("btn-outline-success"),d.innerHTML=efb_var.text.open,d.dataset.state="1"),document.getElementById("replayB_emsFormBuilder").remove(),document.getElementById("attach_efb")&&document.getElementById("attach_efb").remove(),document.getElementById("replayM_emsFormBuilder").remove(),document.getElementById("label_replyM_efb").remove(),document.getElementById("replay_state__emsFormBuilder").innerHTML=`<h5 class="efb fs-4 my-3 text-center text-pinkEfb">${efb_var.text.clsdrspn}</h5>`}else{let d=document.getElementById("respStateEfb");d&&(d.disabled=!1,d.classList.contains("btn-outline-success")||d.classList.remove("btn-outline-success"),d.classList.contains("btn-outline-pink")||d.classList.add("btn-outline-pink"),d.innerHTML=efb_var.text.close,d.dataset.state="0")}},t)},window.addEventListener("offline",e=>{console.log("offline")}),window.addEventListener("online",e=>{console.log("online")}),santize_string_efb=str=>{return null==str?null:str.replaceAll(/(<)(script[^>]*>[^<]*(?:<(?!\/script>)[^<]*)*<\/script>|\/?\b[^<>]+>|!(?:--\s*(?:(?:\[if\s*!IE]>\s*-->)?[^-]*(?:-(?!->)-*[^-]*)*)--|\[CDATA[^\]]*(?:](?!]>)[^\]]*)*]])>)/g,"")};const checkInvalidUTF8_efb=(string,strip=!1)=>{return 0===(string=String(string)).length?"":encodeURI(string)===string?string:strip?unescape(encodeURIComponent(string)):""},preKsesLessThan_efb=text=>text.replace(/<[^>]*?((?=<)|>|$)/g,function(match){return preKsesLessThanCallback_efb(match)}),preKsesLessThanCallback_efb=matches=>-1===matches[0].indexOf(">")?escHtml(matches[0]):matches[0];function escHtml(unsafe){return unsafe.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}const stripAllTags_efb=(string,removeBreaks=!1)=>(string=(string=string.replace(/@<(script|style)[^>]*?>.*?<\/\1>@si/g,"")).replace(/<[^>]*>/g,""),(string=removeBreaks?string.replace(/[\r\n\t ]+/g," "):string).trim()),sanitize_text_efb=(str,keep_newlines=!1)=>{if("object"==typeof str||Array.isArray(str))return"";if(null==str)return str;let filtered=str=str.toString(),found=(-1!==filtered.indexOf("<")&&(filtered=preKsesLessThan_efb(filtered),filtered=(filtered=stripAllTags_efb(filtered,!1)).replace(/<\n/g,"&lt;\n")),filtered=(filtered=keep_newlines?filtered:filtered.replace(/[\r\n\t ]+/g," ")).trim(),!1);for(;/%[a-f0-9]{2}/i.test(filtered);)filtered=filtered.replace(/%[a-f0-9]{2}/i,""),found=!0;return filtered=found?filtered.trim().replace(/ +/g," "):filtered},add_r_matrix_view_select=(valNotFound_efb=()=>{alert_message_efb("Security Error","Varible value is empty!",30,"danger")},(idin,value,id_ob,tag,parentsID)=>{var indxP=valj_efb.findIndex(x=>x.id_==parentsID);valj_efb[indxP].hasOwnProperty("op_style")&&1!=Number(valj_efb[indxP].op_style)&&Number(valj_efb[indxP].op_style);return`
    <!---here r_matrix-->
      <div class="efb  col-sm-12 row my-1" data-id="${idin}" data-parent="${parentsID}" id="${idin}-v">
        <div class="efb my-2 col-md-8 fs-6 ${valj_efb[indxP].el_text_color}  ${valj_efb[indxP].el_height} ${valj_efb[indxP].label_text_size}" id="${idin}_lab">${efb_var.text.newOption}</div>
        <div class="efb col-md-4 d-flex justify-content-center " id="${idin}" > 
            <div class="efb btn btn-secondary text-white mx-1 disabled"  data-point="5"  data-id="${idin}"  onclick="fun_point_rating(this)"> <i class="efb bi-star-fill"></i></div>
            <div class="efb btn btn-secondary text-white mx-1 disabled"  data-point="4"  data-id="${idin}"  onclick="fun_point_rating(this)"> <i class="efb bi-star-fill"></i></div>
            <div class="efb btn btn-secondary text-white mx-1 disabled"  data-point="3"  data-id="${idin}"  onclick="fun_point_rating(this)"> <i class="efb bi-star-fill"></i></div>
            <div class="efb btn btn-secondary text-white mx-1 disabled"  data-point="2"  data-id="${idin}"  onclick="fun_point_rating(this)"> <i class="efb bi-star-fill"></i></div>
            <div class="efb btn btn-secondary text-white mx-1 disabled"  data-point="1"  data-id="${idin}"  onclick="fun_point_rating(this)"> <i class="efb bi-star-fill"></i></div>
            <input type="hidden" data-vid="${idin}" data-parent="${parentsID} data-type="rating"  id="${idin}-point-rating" >
        </div>                                            
    </div>
    `});async function fetch_json_from_url_efb(url){let r={s:!(temp_efb="null"),r:"false"};fetch(url).then(response=>response.json()).then(data=>{r.s=!0,r.r=data}).catch(error=>{console.error("Error:",error),r.r=error}),temp_efb=r}function fun_send_mail_emsFormBuilder(id,nonce,type_){console.log("fun_send_mail_emsFormBuilder");id={action:"mail_send_submited_Emsfb",id:id,type_:type_,nonce:nonce,sid:efb_var.sid},type_=new Headers({"Content-Type":"application/json"}),nonce=efb_var.rest_url+"Emsfb/v1/forms/email/send",id=JSON.stringify(id);fetch(nonce,{method:"POST",headers:type_,body:id}).then(response=>response.json()).then(responseData=>{console.table(responseData)}).catch(error=>{console.error("error",error)})}fun_captcha_load_efb=()=>` ${1<sitekye_emsFormBuilder.length?`<div class="efb row mx-0"><div id="gRecaptcha" class="efb g-recaptcha my-2 mx-0 px-0" data-sitekey="${sitekye_emsFormBuilder}" data-callback="verifyCaptcha" style="transform:scale(0.88);-webkit-transform:scale(0.88);transform-origin:0 0;-webkit-transform-origin:0 0;"></div><small class="efb text-danger" id="recaptcha-message"></small></div>`:""}
            <!-- fieldset1 --> 
            ${"view"==state_efb&&1==valj_efb[0].captcha?`<div class="efb col-12 mb-2 mx-0 mt-3 efb" id="recaptcha_efb"><img src="${efb_var.images.recaptcha}" id="img_recaptcha_perview_efb"></div>`:""}
            <div id="step-1-efb-msg"></div>`;